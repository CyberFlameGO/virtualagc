<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
These source-code files are part of a reconstructed copy of Luminary 69/2,
the flown, final release of the Apollo 10 Lunar Module (LM) Apollo Guidance Computer (AGC) software. 
<br><br>
The reconstruction is based on the source code of Luminary 69 &mdash; i.e., the
initial, unflown version, "revision 0" &mdash; of which 
a contemporary listing was available.  The code was then updated by incorporating the 
differences between Luminary 69 and Luminary 69/2, known from other contemporary
documentation.  The only such difference is the implementation in 
Luminary 69/2 of the "R-2 Lunar Potential Model", the source code for which was taken 
from program Luminary 99/1 (Apollo 11 LM), of which a contemporary listing was also available.
Finally, the now-reconstructed Luminary 69/2 was then validated by assembling it to
executable form and verifying that its memory banks had the correct checksums,
known from still other contemporary documentation.
<br><br>
Note that page numbers in the reconstructed code match those in the original Luminary 69
program listing, or in the ORBITAL INTEGRATION log section, in Luminary 99/1. Page numbers 
would certainly differ somewhat in a contemporary Luminary 69/2 listing.
Moreover, annotations that were not present in the contemporary source code have been added 
to the reconstructed code to justify each change in Luminary 69/2 relative to 
Luminary 69. Here's a guide to the Apollo documentation referenced in those annotations:<br>
<ul>
<li><a href="https://archive.org/stream/apertureCardBox467Part2NARASW_images#page/n80/mode/1up">
    MIT/IL engineering drawing 2021152N, sheet 3</a>.  Listing of the memory-bank 
    checksums for Luminary 69/2 (called "LUMINARY 69 REV. 2" in the document itself).</li>
<li><a href="https://archive.org/details/Luminary99001J2k60/mode/1up">
       Luminary 99/1 (Apollo 11 LM final release) assembly listing</a>.</li>
<li><a href="https://archive.org/details/luminary6900miti/mode/1up">
       Luminary 69 (Apollo 10 LM initial release) assembly listing</a>.</li>
<li><a href="http://www.ibiblio.org/apollo/Documents/LUM75_text.pdf">
       LUMINARY Memo #75, "R-2 Lunar Potential Model Added to LUM"</a>.</li>
<li><a href="http://www.ibiblio.org/apollo/Documents/LUM78_text.pdf">
       LUMINARY Memo #78, "LUMINARY Revisions 93-96"</a>.</li>
</ul>
Comments from the original source code are prefixed with a single '#' symbol, 
whereas comments added later are prefixed by "##" or "###".  Report any errors 
noted by creating an 
issue report at <a href="https://github.com/rburkey2005/virtualagc/issues">the Virtual AGC
project's GitHub repository</a>.
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
057361,000002:                                                                                                  <span class="co">## Copyright:   Public domain.</span>
057362,000003:                                                                                                  <span class="co">## Filename:    KEYRUPT,_UPRUPT.agc</span>
057363,000004:                                                                                                  <span class="co">## Purpose:     A section of LUM69 revision 2.</span>
057364,000005:                                                                                                  <span class="co">##              It is part of the reconstructed source code for the flown</span>
057365,000006:                                                                                                  <span class="co">##              version of the flight software for the Lunar Module's (LM)</span>
057366,000007:                                                                                                  <span class="co">##              Apollo Guidance Computer (AGC) for Apollo 10. The code has</span>
057367,000008:                                                                                                  <span class="co">##              been recreated from a copy of Luminary revsion 069, using</span>
057368,000009:                                                                                                  <span class="co">##              changes present in Luminary 099 which were described in</span>
057369,000010:                                                                                                  <span class="co">##              Luminary memos 75 and 78. The code has been adapted such</span>
057370,000011:                                                                                                  <span class="co">##              that the resulting bugger words exactly match those specified</span>
057371,000012:                                                                                                  <span class="co">##              for LUM69 revision 2 in NASA drawing 2021152B, which gives</span>
057372,000013:                                                                                                  <span class="co">##              relatively high confidence that the reconstruction is correct.</span>
057373,000014:                                                                                                  <span class="co">## Reference:   pp. 1332-1334</span>
057374,000015:                                                                                                  <span class="co">## Assembler:   yaYUL</span>
057375,000016:                                                                                                  <span class="co">## Contact:     Ron Burkey &lt;info@sandroid.org>.</span>
057376,000017:                                                                                                  <span class="co">## Website:     www.ibiblio.org/apollo/index.html</span>
057377,000018:                                                                                                  <span class="co">## Mod history: 2019-07-27 MAS  Created from Luminary 69.</span>
057378,000019: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1332
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
057380,000021: 14,3711                                           <span class="ps">BANK    </span> 14                                    
057381,000022: 04,2000                                           <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4B455952555054">KEYRUPT</a>                               
057382,000023: 04,2000                                           <span class="ps">BANK    </span>                                       
057383,000024: 04,3215                                           <span class="ps">COUNT*  </span> $$/KEYUP                              
057384,000025: 
<a name="4B45595255505431"></a>057385,000026: 04,3215           54016        <span class="sm">KEYRUPT1</span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42414E4B52555054">BANKRUPT</a>                              
057386,000027: 04,3216           56002                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
057387,000028: 04,3217           54012                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5152555054">QRUPT</a>                                 
057388,000029: 04,3220           04400                           <span class="op">TC      </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F4453414D5054">LODSAMPT</a>                              <span class="co">#  TIME IS SNATCHED IN RUPT FOR NOUN 65.</span>
057389,000030: 04,3221           34346                           <span class="op">CAF     </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F5735">LOW5</a>                                  
057390,000031: 04,3222           00006                           <span class="op">EXTEND  </span>                                       
057391,000032: 04,3223           02015                           <span class="op">RAND    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D4E4B4559494E">MNKEYIN</a>                               <span class="co">#  CHECK IF KEYS 5M-1M ON</span>
<a name="4B4559434F4D"></a>057392,000033: 04,3224           54073        <span class="sm">KEYCOM  </span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              
057393,000034: 04,3225           40101                           <span class="op">CS      </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#464C414757524435">FLAGWRD5</a>                              
057394,000035: 04,3226           74735                           <span class="op">MASK    </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#44534B5946424954">DSKYFBIT</a>                              
057395,000036: 04,3227           26101                           <span class="op">ADS     </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#464C414757524435">FLAGWRD5</a>                              
057396,000037: 
<a name="4143434550545550"></a>057397,000038: 04,3230           34355        <span class="sm">ACCEPTUP</span>           <span class="op">CAF     </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4348525052494F">CHRPRIO</a>                               <span class="co">#  (NOTE: RUPTREG4 = KEYTEMP1)</span>
057398,000039: 04,3231           05072                           <span class="op">TC      </span> <a href="EXECUTIVE.agc.html#4E4F564143">NOVAC</a>                                 
057399,000040: 04,3232     0777                                  <span class="ps">EBANK=  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#445350434F554E54">DSPCOUNT</a>                              
057400,000041: 04,3232           02077 60101                     <span class="ps">2CADR   </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#43484152494E">CHARIN</a>                                
057401,000042: 
057402,000043: 04,3234           30073                           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              
057403,000044: 04,3235           50064                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4F43435452">LOCCTR</a>                                
057404,000045: 04,3236           54154                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D504143">MPAC</a>                                  <span class="co">#  LEAVE 5 BIT KEY CDE IN MPAC FOR CHARIN</span>
057405,000046: 04,3237           05270                           <span class="op">TC      </span> <a href="WAITLIST.agc.html#524553554D45">RESUME</a>                                
057406,000047: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1333
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
057408,000049:                                                                                                  <span class="co">#  UPRUPT PROGRAM</span>
057409,000050: 
<a name="555052555054"></a>057410,000051: 04,3240           54016        <span class="sm">UPRUPT  </span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42414E4B52555054">BANKRUPT</a>                              
057411,000052: 04,3241           56002                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
057412,000053: 04,3242           54012                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5152555054">QRUPT</a>                                 
057413,000054: 04,3243           04400                           <span class="op">TC      </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F4453414D5054">LODSAMPT</a>                              <span class="co">#  TIME IS SNATCHED IN RUPT FOR NOUN 65.</span>
057414,000055: 04,3244           34755                           <span class="op">CAF     </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#5A45524F">ZERO</a>                                  
057415,000056: 04,3245           56045                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#494E4C494E4B">INLINK</a>                                
057416,000057: 04,3246           54073                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              
057417,000058: 04,3247           34751                           <span class="op">CAF     </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#42495433">BIT3</a>                                  <span class="co">#  TURN ON UPACT LIGHT</span>
057418,000059: 04,3250           00006                           <span class="op">EXTEND  </span>                                       <span class="co">#  (BIT 3 OF CHANNEL 11)</span>
057419,000060: 04,3251           05011                           <span class="op">WOR     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4453414C4D4F5554">DSALMOUT</a>                              
<a name="555052505431"></a>057420,000061: 04,3252           34346        <span class="sm">UPRPT1  </span>           <span class="op">CAF     </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F5735">LOW5</a>                                  <span class="co">#  TEST FOR TRIPLE CHAR REDUNDANCY</span>
057421,000062: 04,3253           70073                           <span class="op">MASK    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              <span class="co">#  LOW5 OF WORD</span>
057422,000063: 04,3254           56073                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              <span class="co">#  LOW5 INTO KEYTEMP1</span>
057423,000064: 04,3255           00006                           <span class="op">EXTEND  </span>                                       
057424,000065: 04,3256           74742                           <span class="op">MP      </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#4249543130">BIT10</a>                                 <span class="co">#  SHIFT RIGHT 5</span>
057425,000066: 04,3257           54734                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5032">KEYTEMP2</a>                              
057426,000067: 04,3260           74346                           <span class="op">MASK    </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F5735">LOW5</a>                                  <span class="co">#  MID 5</span>
057427,000068: 04,3261           63315                           <span class="op">AD      </span> <a href="#48493130">HI10</a>                                  
057428,000069: 04,3262           03312                           <span class="op">TC      </span> <a href="#555054455354">UPTEST</a>                                
057429,000070: 04,3263           34742                           <span class="op">CAF     </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#4249543130">BIT10</a>                                 
057430,000071: 04,3264           00006                           <span class="op">EXTEND  </span>                                       
057431,000072: 04,3265           70734                           <span class="op">MP      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5032">KEYTEMP2</a>                              <span class="co">#  SHIFT RIGHT 5</span>
057432,000073: 04,3266           74346                           <span class="op">MASK    </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F5735">LOW5</a>                                  <span class="co">#  HIGH 5</span>
057433,000074: 04,3267           40000                           <span class="op">COM     </span>                                       
057434,000075: 04,3270           03312                           <span class="op">TC      </span> <a href="#555054455354">UPTEST</a>                                
057435,000076: 
<a name="5550434B"></a>057436,000077: 04,3271           43320        <span class="sm">UPCK    </span>           <span class="op">CS      </span> <a href="#454C52434F4445">ELRCODE</a>                               <span class="co">#  CODE IS GOOD. IF CODE = 'ERROR RESET',</span>
057437,000078: 04,3272           60073                           <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              <span class="co">#  CLEAR UPLOCKFL(SET BIT4 OF FLAGWRD7 = 0)</span>
057438,000079: 04,3273           00006                           <span class="op">EXTEND  </span>                                       <span class="co">#  IF CODE DOES NOT = 'ERROR RESET', ACCEPT</span>
057439,000080: 04,3274           13302                           <span class="op">BZF     </span> <a href="#434C55504C4F434B">CLUPLOCK</a>                              <span class="co">#  CODE ONLY IF UPLOCKFL IS CLEAR (=0).</span>
057440,000081: 
057441,000082: 04,3275           34750                           <span class="op">CAF     </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#55504C4F43424954">UPLOCBIT</a>                              <span class="co">#  TEST UPLOCKFL FOR 0 OR 1</span>
057442,000083: 04,3276           70103                           <span class="op">MASK    </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              
057443,000084: 04,3277           10000                           <span class="op">CCS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     
057444,000085: 04,3300           05270                           <span class="op">TC      </span> <a href="WAITLIST.agc.html#524553554D45">RESUME</a>                                <span class="co">#  UPLOCKFL = 1</span>
057445,000086: 04,3301           03230                           <span class="op">TC      </span> <a href="#4143434550545550">ACCEPTUP</a>                              <span class="co">#  UPLOCKFL = 0</span>
057446,000087: 
<a name="434C55504C4F434B"></a>057447,000088: 04,3302           44750        <span class="sm">CLUPLOCK</span>           <span class="op">CS      </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#55504C4F43424954">UPLOCBIT</a>                              <span class="co">#  CLEAR UPLOCKFL (I.E., SET BIT 4 OF )</span>
057448,000089: 04,3303           70103                           <span class="op">MASK    </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              <span class="co">#  FLAGWRD7 = 0)</span>
057449,000090: 04,3304           54103                           <span class="op">TS      </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              
057450,000091: 04,3305           03230                           <span class="op">TC      </span> <a href="#4143434550545550">ACCEPTUP</a>                              
057451,000092: 
057452,000093:                                                                                                  <span class="co">#  CODE IS BAD</span>
<a name="544D4641494C32"></a>057453,000094: 04,3306           40103        <span class="sm">TMFAIL2 </span>           <span class="op">CS      </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              <span class="co">#  LOCK OUT FURTHER UPLINK ACTIVITY</span>
057454,000095: 04,3307           74750                           <span class="op">MASK    </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#55504C4F43424954">UPLOCBIT</a>                              <span class="co">#  (BY SETTING UPLOCKFL = 1) UNTIL</span>
057455,000096: 04,3310           26103                           <span class="op">ADS     </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              <span class="co">#  'ERROR RESET' IS SENT VIA UPLINK.</span>
057456,000097: 04,3311           05270                           <span class="op">TC      </span> <a href="WAITLIST.agc.html#524553554D45">RESUME</a>                                
<a name="555054455354"></a>057457,000098: 04,3312           60073        <span class="sm">UPTEST  </span>           <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1334
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
057459,000100: 04,3313           10000                           <span class="op">CCS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     
057460,000101: 04,3314           03306                           <span class="op">TC      </span> <a href="#544D4641494C32">TMFAIL2</a>                               
<a name="48493130"></a>057461,000102: 04,3315           77740        <span class="sm">HI10    </span>           <span class="ps">OCT     </span> 77740                                 
057462,000103: 04,3316           03306                           <span class="op">TC      </span> <a href="#544D4641494C32">TMFAIL2</a>                               
057463,000104: 04,3317           00002                           <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
057464,000105: 
<a name="454C52434F4445"></a>057465,000106: 04,3320           00022        <span class="sm">ELRCODE </span>           <span class="ps">OCT     </span> 22                                    
057466,000107: 
057467,000108:                                                                                                  <span class="co">#  'UPLINK ACTIVITY LIGHT' IS TURNED OFF BY .....</span>
057468,000109:                                                                                                  <span class="co">#        1.      VBRELDSP</span>
057469,000110:                                                                                                  <span class="co">#        2.      ERROR RESET</span>
057470,000111:                                                                                                  <span class="co">#        3.      UPDATE PROGRAM (P27) ENTERED BY V70,V71,V72,AND V73.</span>
057471,000112:                                                                                                  <span class="co">#                                     -</span>
057472,000113:                                                                                                  <span class="co">#  THE RECEPTION OF A BAD CODE (I.E  CCC FAILURE) LOCKS OUT FURTHER UPLINK ACTIVITY BY SETTING BIT4 OF FLAGWRD7 = 1.</span>
057473,000114:                                                                                                  <span class="co">#  THIS INDICATION WILL BE TRANSFERRED TO THE GROUND BY THE DOWNLINK WHICH DOWNLINKS ALL FLAGWORDS.</span>
057474,000115:                                                                                                  <span class="co">#  WHEN UPLINK ACTIVITY IS LOCKED OUT, IT CAN BE ALLOWED WHEN THE GROUND UPLINKS AND 'ERROR RESET' CODE.</span>
057475,000116:                                                                                                  <span class="co">#  (IT IS RECOMMENDED THAT THE 'ERROR LIGHT RESET' CODE IS PRECEEDED BY 16 BITS THE FIRST OF WHICH IS 1 FOLLOWED</span>
057476,000117:                                                                                                  <span class="co">#  BY 15 ZEROES.  THIS WILL ELIMINATE EXTRANEOUS BITS FROM INLINK WHICH MAY HAVE BEEN LEFT OVER FROM THE ORIGINAL</span>
057477,000118:                                                                                                  <span class="co">#  FAILURE)</span>
057478,000119: 
057479,000120:                                                                                                  <span class="co">#  UPLINK ACTIVITY IS ALSO ALLOWED (UNLOCKED) DURING FRESH START WHEN FRESH START SETS BIT4 OF FLAGWRD7 = 0.</span>
057480,000121: 
057481,000122: 04,3321           44753                           <span class="op">CS      </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#58445350424954">XDSPBIT</a>                               
057482,000123: 

End of include-file KEYRUPT,_UPRUPT.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
