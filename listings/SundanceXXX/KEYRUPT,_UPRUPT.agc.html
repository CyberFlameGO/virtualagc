<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
These source code files are a reconstruction of Sundance, the Apollo 9 LM (Lunar Module) AGC
(Apollo Guidance Computer) flight software, created from binary dumps of original core rope
program modules, as follows:
<ul>
<li>B1 &mdash; Revision 292</li>
<li>B2 &mdash; Revision 302</li>
<li>B3 &mdash; Revision 302</li>
<li>B4 &mdash; Revision 302</li>
<li>B5 &mdash; Revision 292</li>
<li>B6 &mdash; Revision 306</li>
</ul>

This means that source code
does not represent a specific historical revision of Sundance, but rather a mixture of the
three released versions. Nonetheless, it is capable of flying the whole Apollo 9 mission.
This source code matches the binary dumps, as closely as feasible, but 100% match is not possible, 
due <i>mostly</i> to changes in memory addresses at which code and variables were allocated in 
different revisions of Sundance.  Refer to 
<a href="https://github.com/virtualagc/virtualagc/blob/master/SundanceXXX/SundanceXXXDifferences.txt">
<u>this list of explanations for each binary mismatch</u></a>.
<br><br>
Since only binary dumps (rather than listings) of Sundance are available as source material, 
all comments and labels are approximate.
They have been taken from other AGC programs where possible, or, in some places, written
from scratch to match what we believe would have been in the original listing.

</td></tr></tbody></table>

<p class="nobreak">
<span style="font-family: monospace;">
<pre>
052333,000002:                                                                                                  <span class="co">## Copyright:   Public domain.</span>
052334,000003:                                                                                                  <span class="co">## Filename:    KEYRUPT,_UPRUPT.agc</span>
052335,000004:                                                                                                  <span class="co">## Purpose:     A section of a reconstructed, mixed version of Sundance</span>
052336,000005:                                                                                                  <span class="co">##              It is part of the reconstructed source code for the Lunar</span>
052337,000006:                                                                                                  <span class="co">##              Module's (LM) Apollo Guidance Computer (AGC) for Apollo 9.</span>
052338,000007:                                                                                                  <span class="co">##              No original listings of this program are available;</span>
052339,000008:                                                                                                  <span class="co">##              instead, this file was created via disassembly of dumps</span>
052340,000009:                                                                                                  <span class="co">##              of various revisions of Sundance core rope modules.</span>
052341,000010:                                                                                                  <span class="co">## Assembler:   yaYUL</span>
052342,000011:                                                                                                  <span class="co">## Contact:     Ron Burkey &lt;info@sandroid.org>.</span>
052343,000012:                                                                                                  <span class="co">## Website:     www.ibiblio.org/apollo/index.html</span>
052344,000013:                                                                                                  <span class="co">## Mod history: 2020-06-17 MAS  Created from Luminary 69.</span>
052345,000014:                                                                                                  <span class="co">##              2021-05-30 ABS  UPCK -> UPOK</span>
052346,000015: 
052347,000016:                                                                                                  <span class="co">## Sundance 292</span>
052348,000017: 
052349,000018: 14,3734                                           <span class="ps">BANK    </span> 14                                    
052350,000019: 04,2000                                           <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4B455952555054">KEYRUPT</a>                               
052351,000020: 04,2000                                           <span class="ps">BANK    </span>                                       
052352,000021: 04,3104                                           <span class="ps">COUNT*  </span> $$/KEYUP                              
052353,000022: 
<a name="4B45595255505431"></a>052354,000023: 04,3104           54016        <span class="sm">KEYRUPT1</span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42414E4B52555054">BANKRUPT</a>                              
052355,000024: 04,3105           56002                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
052356,000025: 04,3106           54012                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5152555054">QRUPT</a>                                 
052357,000026: 04,3107           04412                           <span class="op">TC      </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F4453414D5054">LODSAMPT</a>                              <span class="co">#  TIME IS SNATCHED IN RUPT FOR NOUN 65.</span>
052358,000027: 04,3110           34360                           <span class="op">CAF     </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F5735">LOW5</a>                                  
052359,000028: 04,3111           00006                           <span class="op">EXTEND  </span>                                       
052360,000029: 04,3112           02015                           <span class="op">RAND    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D4E4B4559494E">MNKEYIN</a>                               <span class="co">#  CHECK IF KEYS 5M-1M ON</span>
<a name="4B4559434F4D"></a>052361,000030: 04,3113           54073        <span class="sm">KEYCOM  </span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              
052362,000031: 04,3114           40101                           <span class="op">CS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524435">FLAGWRD5</a>                              
052363,000032: 04,3115           75010                           <span class="op">MASK    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#44534B5946424954">DSKYFBIT</a>                              
052364,000033: 04,3116           26101                           <span class="op">ADS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524435">FLAGWRD5</a>                              
052365,000034: 
<a name="4143434550545550"></a>052366,000035: 04,3117           34367        <span class="sm">ACCEPTUP</span>           <span class="op">CAF     </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4348525052494F">CHRPRIO</a>                               <span class="co">#  (NOTE: RUPTREG4 = KEYTEMP1)</span>
052367,000036: 04,3120           05142                           <span class="op">TC      </span> <a href="EXECUTIVE.agc.html#4E4F564143">NOVAC</a>                                 
052368,000037: 04,3121     1000                                  <span class="ps">EBANK=  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#445350434F554E54">DSPCOUNT</a>                              
052369,000038: 04,3121           02212 60102                     <span class="ps">2CADR   </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#43484152494E">CHARIN</a>                                
052370,000039: 
052371,000040: 04,3123           30073                           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              
052372,000041: 04,3124           50064                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4F43435452">LOCCTR</a>                                
052373,000042: 04,3125           54154                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D504143">MPAC</a>                                  <span class="co">#  LEAVE 5 BIT KEY CDE IN MPAC FOR CHARIN</span>
052374,000043: 04,3126           05330                           <span class="op">TC      </span> <a href="WAITLIST.agc.html#524553554D45">RESUME</a>                                
052375,000044: 
052376,000045:                                                                                                  <span class="co">#  UPRUPT PROGRAM</span>
052377,000046: 
<a name="555052555054"></a>052378,000047: 04,3127           54016        <span class="sm">UPRUPT  </span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42414E4B52555054">BANKRUPT</a>                              
052379,000048: 04,3130           56002                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
052380,000049: 04,3131           54012                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5152555054">QRUPT</a>                                 
052381,000050: 04,3132           04412                           <span class="op">TC      </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F4453414D5054">LODSAMPT</a>                              <span class="co">#  TIME IS SNATCHED IN RUPT FOR NOUN 65.</span>
052382,000051: 04,3133           35030                           <span class="op">CAF     </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#5A45524F">ZERO</a>                                  
052383,000052: 04,3134           56045                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#494E4C494E4B">INLINK</a>                                
052384,000053: 04,3135           54073                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              
052385,000054: 04,3136           35024                           <span class="op">CAF     </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#42495433">BIT3</a>                                  <span class="co">#  TURN ON UPACT LIGHT</span>
052386,000055: 04,3137           00006                           <span class="op">EXTEND  </span>                                       <span class="co">#  (BIT 3 OF CHANNEL 11)</span>
052387,000056: 04,3140           05011                           <span class="op">WOR     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4453414C4D4F5554">DSALMOUT</a>                              
<a name="555052505431"></a>052388,000057: 04,3141           34360        <span class="sm">UPRPT1  </span>           <span class="op">CAF     </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F5735">LOW5</a>                                  <span class="co">#  TEST FOR TRIPLE CHAR REDUNDANCY</span>
052389,000058: 04,3142           70073                           <span class="op">MASK    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              <span class="co">#  LOW5 OF WORD</span>
052390,000059: 04,3143           56073                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              <span class="co">#  LOW5 INTO KEYTEMP1</span>
052391,000060: 04,3144           00006                           <span class="op">EXTEND  </span>                                       
052392,000061: 04,3145           75015                           <span class="op">MP      </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#4249543130">BIT10</a>                                 <span class="co">#  SHIFT RIGHT 5</span>
052393,000062: 04,3146           54734                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5032">KEYTEMP2</a>                              
052394,000063: 04,3147           74360                           <span class="op">MASK    </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F5735">LOW5</a>                                  <span class="co">#  MID 5</span>
052395,000064: 04,3150           63204                           <span class="op">AD      </span> <a href="#48493130">HI10</a>                                  
052396,000065: 04,3151           03201                           <span class="op">TC      </span> <a href="#555054455354">UPTEST</a>                                
052397,000066: 04,3152           35015                           <span class="op">CAF     </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#4249543130">BIT10</a>                                 
052398,000067: 04,3153           00006                           <span class="op">EXTEND  </span>                                       
052399,000068: 04,3154           70734                           <span class="op">MP      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5032">KEYTEMP2</a>                              <span class="co">#  SHIFT RIGHT 5</span>
052400,000069: 04,3155           74360                           <span class="op">MASK    </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F5735">LOW5</a>                                  <span class="co">#  HIGH 5</span>
052401,000070: 04,3156           40000                           <span class="op">COM     </span>                                       
052402,000071: 04,3157           03201                           <span class="op">TC      </span> <a href="#555054455354">UPTEST</a>                                
052403,000072: 
<a name="55504F4B"></a>052404,000073: 04,3160           43207        <span class="sm">UPOK    </span>           <span class="op">CS      </span> <a href="#454C52434F4445">ELRCODE</a>                               <span class="co">#  CODE IS GOOD. IF CODE = 'ERROR RESET',</span>
052405,000074: 04,3161           60073                           <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              <span class="co">#  CLEAR UPLOCKFL(SET BIT4 OF FLAGWRD7 = 0)</span>
052406,000075: 04,3162           00006                           <span class="op">EXTEND  </span>                                       <span class="co">#  IF CODE DOES NOT = 'ERROR RESET', ACCEPT</span>
052407,000076: 04,3163           13171                           <span class="op">BZF     </span> <a href="#434C55504C4F434B">CLUPLOCK</a>                              <span class="co">#  CODE ONLY IF UPLOCKFL IS CLEAR (=0).</span>
052408,000077: 
052409,000078: 04,3164           35023                           <span class="op">CAF     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#55504C4F43424954">UPLOCBIT</a>                              <span class="co">#  TEST UPLOCKFL FOR 0 OR 1</span>
052410,000079: 04,3165           70103                           <span class="op">MASK    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              
052411,000080: 04,3166           10000                           <span class="op">CCS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     
052412,000081: 04,3167           05330                           <span class="op">TC      </span> <a href="WAITLIST.agc.html#524553554D45">RESUME</a>                                <span class="co">#  UPLOCKFL = 1</span>
052413,000082: 04,3170           03117                           <span class="op">TC      </span> <a href="#4143434550545550">ACCEPTUP</a>                              <span class="co">#  UPLOCKFL = 0</span>
052414,000083: 
<a name="434C55504C4F434B"></a>052415,000084: 04,3171           45023        <span class="sm">CLUPLOCK</span>           <span class="op">CS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#55504C4F43424954">UPLOCBIT</a>                              <span class="co">#  CLEAR UPLOCKFL (I.E., SET BIT 4 OF )</span>
052416,000085: 04,3172           70103                           <span class="op">MASK    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              <span class="co">#  FLAGWRD7 = 0)</span>
052417,000086: 04,3173           54103                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              
052418,000087: 04,3174           03117                           <span class="op">TC      </span> <a href="#4143434550545550">ACCEPTUP</a>                              
052419,000088: 
052420,000089:                                                                                                  <span class="co">#  CODE IS BAD</span>
<a name="544D4641494C32"></a>052421,000090: 04,3175           40103        <span class="sm">TMFAIL2 </span>           <span class="op">CS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              <span class="co">#  LOCK OUT FURTHER UPLINK ACTIVITY</span>
052422,000091: 04,3176           75023                           <span class="op">MASK    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#55504C4F43424954">UPLOCBIT</a>                              <span class="co">#  (BY SETTING UPLOCKFL = 1) UNTIL</span>
052423,000092: 04,3177           26103                           <span class="op">ADS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              <span class="co">#  'ERROR RESET' IS SENT VIA UPLINK.</span>
052424,000093: 04,3200           05330                           <span class="op">TC      </span> <a href="WAITLIST.agc.html#524553554D45">RESUME</a>                                
<a name="555054455354"></a>052425,000094: 04,3201           60073        <span class="sm">UPTEST  </span>           <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              
052426,000095: 04,3202           10000                           <span class="op">CCS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     
052427,000096: 04,3203           03175                           <span class="op">TC      </span> <a href="#544D4641494C32">TMFAIL2</a>                               
<a name="48493130"></a>052428,000097: 04,3204           77740        <span class="sm">HI10    </span>           <span class="ps">OCT     </span> 77740                                 
052429,000098: 04,3205           03175                           <span class="op">TC      </span> <a href="#544D4641494C32">TMFAIL2</a>                               
052430,000099: 04,3206           00002                           <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
052431,000100: 
<a name="454C52434F4445"></a>052432,000101: 04,3207           00022        <span class="sm">ELRCODE </span>           <span class="ps">OCT     </span> 22                                    
052433,000102: 
052434,000103:                                                                                                  <span class="co">#  'UPLINK ACTIVITY LIGHT' IS TURNED OFF BY .....</span>
052435,000104:                                                                                                  <span class="co">#        1.      VBRELDSP</span>
052436,000105:                                                                                                  <span class="co">#        2.      ERROR RESET</span>
052437,000106:                                                                                                  <span class="co">#        3.      UPDATE PROGRAM (P27) ENTERED BY V70,V71,V72,AND V73.</span>
052438,000107:                                                                                                  <span class="co">#                                     -</span>
052439,000108:                                                                                                  <span class="co">#  THE RECEPTION OF A BAD CODE (I.E  CCC FAILURE) LOCKS OUT FURTHER UPLINK ACTIVITY BY SETTING BIT4 OF FLAGWRD7 = 1.</span>
052440,000109:                                                                                                  <span class="co">#  THIS INDICATION WILL BE TRANSFERRED TO THE GROUND BY THE DOWNLINK WHICH DOWNLINKS ALL FLAGWORDS.</span>
052441,000110:                                                                                                  <span class="co">#  WHEN UPLINK ACTIVITY IS LOCKED OUT, IT CAN BE ALLOWED WHEN THE GROUND UPLINKS AND 'ERROR RESET' CODE.</span>
052442,000111:                                                                                                  <span class="co">#  (IT IS RECOMMENDED THAT THE 'ERROR LIGHT RESET' CODE IS PRECEEDED BY 16 BITS THE FIRST OF WHICH IS 1 FOLLOWED</span>
052443,000112:                                                                                                  <span class="co">#  BY 15 ZEROES.  THIS WILL ELIMINATE EXTRANEOUS BITS FROM INLINK WHICH MAY HAVE BEEN LEFT OVER FROM THE ORIGINAL</span>
052444,000113:                                                                                                  <span class="co">#  FAILURE)</span>
052445,000114: 
052446,000115:                                                                                                  <span class="co">#  UPLINK ACTIVITY IS ALSO ALLOWED (UNLOCKED) DURING FRESH START WHEN FRESH START SETS BIT4 OF FLAGWRD7 = 0.</span>

End of include-file KEYRUPT,_UPRUPT.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
