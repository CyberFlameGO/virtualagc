<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
These source code files are an attempted reconstruction of Sundance revision 306, the Apollo 9
LM (Lunar Module) AGC (Apollo Guidance Computer) flight software, created from binary dumps of
original core rope program modules, as follows:
<ul>
<li>B1 &mdash; Revision 292</li>
<li>B2 &mdash; Revision 302</li>
<li>B3 &mdash; Revision 302</li>
<li>B4 &mdash; Revision 302</li>
<li>B5 &mdash; Revision 292</li>
<li>B6 &mdash; Revision 306</li>
</ul>

These dumps were then modified using memos, checklists, observed address changes, and the
Sundance GSOPs to get the entire program to match Sundance revision 306 as closely as possible.
Without more information, it is not possible to say how close it actually is; however, this
code should be quite close. It is capable of flying the whole Apollo 9 mission using the original
checklists and padload.
Since only binary dumps (rather than listings) of Sundance are available as source material, 
all comments and labels are approximate.
They have been taken from other AGC programs where possible, or, in some places, written
from scratch to match what we believe would have been in the original listing.

</td></tr></tbody></table>

<p class="nobreak">
<span style="font-family: monospace;">
<pre>
059949,000002:                                                                                                  <span class="co">## Copyright:   Public domain.</span>
059950,000003:                                                                                                  <span class="co">## Filename:    SPS_BACK-UP_RCS_CONTROL.agc</span>
059951,000004:                                                                                                  <span class="co">## Purpose:     A section of an attempt to reconstruct Sundance revision 306</span>
059952,000005:                                                                                                  <span class="co">##              as closely as possible with available information. Sundance</span>
059953,000006:                                                                                                  <span class="co">##              306 is the source code for the Lunar Module's (LM) Apollo</span>
059954,000007:                                                                                                  <span class="co">##              Guidance Computer (AGC) for Apollo 9. This program was created</span>
059955,000008:                                                                                                  <span class="co">##              using the mixed-revision SundanceXXX as a starting point, and</span>
059956,000009:                                                                                                  <span class="co">##              pulling back features from Luminary 69 believed to have been</span>
059957,000010:                                                                                                  <span class="co">##              added based on memos, checklists, observed address changes,</span>
059958,000011:                                                                                                  <span class="co">##              or the Sundance GSOPs.</span>
059959,000012:                                                                                                  <span class="co">## Assembler:   yaYUL</span>
059960,000013:                                                                                                  <span class="co">## Contact:     Ron Burkey &lt;info@sandroid.org>.</span>
059961,000014:                                                                                                  <span class="co">## Website:     www.ibiblio.org/apollo/index.html</span>
059962,000015:                                                                                                  <span class="co">## Mod history: 2020-07-24 MAS  Created from SundanceXXX.</span>
059963,000016: 
059964,000017: 
059965,000018: 
059966,000019:                                                                                                  <span class="co">#  PROGRAM NAME:  SPSRCS</span>
059967,000020: 
059968,000021:                                                                                                  <span class="co">#  AUTHOR:  EDGAR M. OSHIKA (AC ELECTRONICS)</span>
059969,000022: 
059970,000023:                                                                                                  <span class="co">#  MODIFIED:  TO RETURN TO ALL AXES VIA Q BY P. S. WEISSMAN, OCT 7, 1968</span>
059971,000024: 
059972,000025:                                                                                                  <span class="co">#  FUNCTIONAL DESCRIPTION:</span>
059973,000026: 
059974,000027:                                                                                                  <span class="co">#  THIS PROGRAM CONTROLS THE FIRING OF ALL RCS JETS IN THE DOCKED CONFIGURATION ACCORDING TO THE FOLLOWING PHASE</span>
059975,000028:                                                                                                  <span class="co">#  PLANE LOGIC.</span>
059976,000029: 
059977,000030:                                                                                                  <span class="co">#  1.  OUTER RATE LIMIT (SPSRCS)</span>
059978,000031: 
059979,000032:                                                                                                  <span class="co">#  IF MAGNITUDE OF EDOT IS GREATER THAN 1.73 DEG/SEC SET JET FIRING TIME, TJ, TO REDUCE RATE AND THEN RETURN TO</span>
059980,000033:                                                                                                  <span class="co">#  CALLING PROGRAM (REQUESTING 4 JETS FOR P-AXIS).</span>
059981,000034:                                                                                                  <span class="co">#  OTHERWISE, CONTINUE.</span>
059982,000035: 
059983,000036:                                                                                                  <span class="co">#  2.  RATE DEAD BAND TEST ( JTONTEST)</span>
059984,000037: 
059985,000038:                                                                                                  <span class="co">#  IF JETS ARE FIRING NEGATIVE AND RATE IS GREATER THAN -0.101 DEG/SEC, LEAVE JETS ON AND RETURN,</span>
059986,000039:                                                                                                  <span class="co">#  IF JETS ARE FIRING POSITIVE AND RATE IS LESS THAN +0.101 DEG/SEC, LEAVE JETS ON AND RETURN, OTHERWISE CONTINUE.</span>
059987,000040: 
059988,000041:                                                                                                  <span class="co">#  3.  COASTING TEST (SPSSTART)</span>
059989,000042: 
059990,000043:                                                                                                  <span class="co">#  IF STATE (E,EDOT) IS BELOW LINE  E + 4 X EDOT > -1.4 DEG  AND EDOT IS LESS THAN 1.30 DEG/SEC SET JET TIME POSI-</span>
059991,000044:                                                                                                  <span class="co">#  TIVE AND RETURN,</span>
059992,000045:                                                                                                  <span class="co">#  IF STATE IS ABOVE LINE E + 4 X EDOT > +1.4 DEG AND EDOT IS GREATER THAN -1.30 DEG/SEC, SET JET TIME NEGATIVE</span>
059993,000046:                                                                                                  <span class="co">#  AND RETURN,</span>
059994,000047:                                                                                                  <span class="co">#  OTHERWISE, SET JET TIME ZERO AND RETURN.</span>
059995,000048: 
059996,000049:                                                                                                  <span class="co">#  THE MINIMUM PULSE WIDTH OF THIS CONTROLLER IS DETERMINED BY THE REPETITION  RATE AT WHICH THIS ROUTINE IS CALLED</span>
059997,000050:                                                                                                  <span class="co">#  AND IS NOMINALLY 100 MS FOR ALL AXES IN DRIFTING FLIGHT.   DURING POWERED FLIGHT THE MINIMUM IS 100 MS FOR THE</span>
059998,000051:                                                                                                  <span class="co">#  P AXIS AND 200 MS FOR THE CONTROL OF THE U AND V AXES.</span>
059999,000052: 
060000,000053:                                                                                                  <span class="co">#  CALLING SEQUENCE:</span>
060001,000054: 
060002,000055:                                                                                                  <span class="co">#           TC     SPSRCS          FROM Q,R AXES RCS AUTOPILOT</span>
060003,000056:                                                                                                  <span class="co">#                      INHINT                  FROM P-AXIS RCS AUTOPILOT</span>
060004,000057:                                                                                                  <span class="co">#                      TC      IBNKCALL</span>
060005,000058:                                                                                                  <span class="co">#                      CADR    SPSRCS</span>
060006,000059: 
060007,000060: 
060008,000061:                                                                                                  <span class="co">#  EXIT:</span>
060009,000062: 
060010,000063:                                                                                                  <span class="co">#           TC     Q</span>
060011,000064:                                                                                                  <span class="co">#  ALARM/ABORT MODE:    NONE</span>
060012,000065: 
060013,000066:                                                                                                  <span class="co">#  SUBROUTINES CALLED:    NONE</span>
060014,000067: 
060015,000068:                                                                                                  <span class="co">#  INPUT:      E, EDOT</span>
060016,000069: 
060017,000070:                                                                                                  <span class="co">#             TJP, TJV, TJU           TJ MUST NOT BE NEGATIVE ZERO</span>
060018,000071: 
060019,000072:                                                                                                  <span class="co">#  OUTPUT:    TJP, TJV, TJU</span>
060020,000073:                                                                                                  <span class="co">#             NUMBERT = 6,            WHEN RATE LIMITING P AXIS.</span>
060021,000074: 
060022,000075: 
060023,000076: 17,3526                                           <span class="ps">BANK    </span> 17                                    
060024,000077: 17,2000                                           <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4441505332">DAPS2</a>                                 
060025,000078: 17,2000                                           <span class="ps">BANK    </span>                                       
060026,000079: 
060027,000080: 17,3526                                           <span class="ps">COUNT*  </span> $$/DAPBU                              
060028,000081: 
060029,000082: 17,3526  E6,1517                                  <span class="ps">EBANK=  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#544A55">TJU</a>                                   
<a name="535053524353"></a>060030,000083: 17,3526           31543        <span class="sm">SPSRCS  </span>           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#45444F54">EDOT</a>                                  
060031,000084: 17,3527           00006                           <span class="op">EXTEND  </span>                                       
060032,000085: 17,3530           75036                           <span class="op">MP      </span> <a href="#524154454C494D31">RATELIM1</a>                              <span class="co">#  OUTER RATE LIMIT = 1.73 DEG/SEC</span>
060033,000086: 17,3531           00006                           <span class="op">EXTEND  </span>                                       
060034,000087: 17,3532           13563                           <span class="op">BZF     </span> <a href="#4A544F4E54455354">JTONTEST</a>                              
060035,000088: 
060036,000089: 17,3533           54001                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C">L</a>                                     
060037,000090: 17,3534           36216                           <span class="op">CA      </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#534958">SIX</a>                                   
060038,000091: 17,3535           55740                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4E554D42455254">NUMBERT</a>                               
060039,000092: 17,3536           10001                           <span class="op">CCS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C">L</a>                                     
060040,000093: 17,3537           13617                           <span class="op">TCF     </span> <a href="#4E45475448525354">NEGTHRST</a>                              
060041,000094: 17,3540           05726                           <span class="op">TC      </span> <a href="ALARM_AND_ABORT.agc.html#434353484F4C45">CCSHOLE</a>                               <span class="co">#  **TEMP ** FILL WITH A CONSTANT</span>
<a name="524154454C494D32"></a>060042,000095: 17,3541  17,3512               <span class="sm">RATELIM2</span>           <span class="ps">=       </span> <a href="TJET_LAW.agc.html#2E31415434">.1AT4</a>                                 <span class="co">#  = OCT 00632,  1.125 DEG/SEC</span>
<a name="504F535448525354"></a>060043,000096: 17,3541           35011        <span class="sm">POSTHRST</span>           <span class="op">CA      </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#48414C46">HALF</a>                                  
060044,000097: 
060045,000098: 17,3542           51471                           <span class="op">NDX     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41584953435452">AXISCTR</a>                               
060046,000099: 17,3543           55517                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#544A55">TJU</a>                                   
060047,000100: 17,3544           11471                           <span class="op">CCS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41584953435452">AXISCTR</a>                               
060048,000101: 17,3545           13550                           <span class="op">TCF     </span> +3                                    
060049,000102: 17,3546           13550                           <span class="op">TCF     </span> +2                                    
060050,000103: 17,3547           00002                           <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
060051,000104: 
060052,000105: 17,3550           30101                           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524435">FLAGWRD5</a>                              
060053,000106: 17,3551           75012                           <span class="op">MASK    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#534E554646424954">SNUFFBIT</a>                              
060054,000107: 17,3552           00006                           <span class="op">EXTEND  </span>                                       
060055,000108: 17,3553           12522                           <span class="op">BZF     </span> <a href="Q,R-AXES_RCS_AUTOPILOT.agc.html#4146544552544A">AFTERTJ</a>    -2                         
060056,000109: 17,3554           31102                           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#444150424F4F4C53">DAPBOOLS</a>                              
060057,000110: 17,3555           75017                           <span class="op">MASK    </span> <a href="DAP_INTERFACE_SUBROUTINES.agc.html#4452494654424954">DRIFTBIT</a>                              
060058,000111: 17,3556           10000                           <span class="op">CCS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     
060059,000112: 17,3557           12522                           <span class="op">TCF     </span> <a href="Q,R-AXES_RCS_AUTOPILOT.agc.html#4146544552544A">AFTERTJ</a>    -2                         
060060,000113: 
060061,000114: 17,3560           51471                           <span class="op">NDX     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41584953435452">AXISCTR</a>                               
060062,000115: 17,3561           55517                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#544A55">TJU</a>                                   
060063,000116: 17,3562           12522                           <span class="op">TCF     </span> <a href="Q,R-AXES_RCS_AUTOPILOT.agc.html#4146544552544A">AFTERTJ</a>    -2                         
060064,000117: 
<a name="4A544F4E54455354"></a>060065,000118: 17,3563           51471        <span class="sm">JTONTEST</span>           <span class="op">NDX     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41584953435452">AXISCTR</a>                               
060066,000119: 17,3564           11517                           <span class="op">CCS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#544A55">TJU</a>                                   
060067,000120: 17,3565           13571                           <span class="op">TCF     </span> +4                                    
060068,000121: 17,3566           13603                           <span class="op">TCF     </span> <a href="#5350535354415254">SPSSTART</a>                              
060069,000122: 17,3567           31543                           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#45444F54">EDOT</a>                                  
060070,000123: 17,3570           13572                           <span class="op">TCF     </span> +2                                    
060071,000124: 
060072,000125: 17,3571           41543                 +4        <span class="op">CS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#45444F54">EDOT</a>                                  
060073,000126: 17,3572           22000                           <span class="op">LXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     
060074,000127: 17,3573           41102                           <span class="op">CS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#444150424F4F4C53">DAPBOOLS</a>                              <span class="co">#  IF DRIFTBIT = 1, USE ZERO TARGET RATE</span>
060075,000128: 17,3574           75017                           <span class="op">MASK    </span> <a href="DAP_INTERFACE_SUBROUTINES.agc.html#4452494654424954">DRIFTBIT</a>                              <span class="co">#  IF DRIFTBIT = 0, USE 0.10 RATE TARGET</span>
060076,000129: 17,3575           10000                           <span class="op">CCS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     
060077,000130: 17,3576           35037                           <span class="op">CA      </span> <a href="#52415445444231">RATEDB1</a>                               
060078,000131: 17,3577           60001                           <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C">L</a>                                     
060079,000132: 17,3600           00006                           <span class="op">EXTEND  </span>                                       
060080,000133: 17,3601           63603                           <span class="op">BZMF    </span> +2                                    
060081,000134: 17,3602           13544                           <span class="op">TCF     </span> <a href="#504F535448525354">POSTHRST</a>   +3                         
060082,000135: 
<a name="5350535354415254"></a>060083,000136: 17,3603           31543        <span class="sm">SPSSTART</span>           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#45444F54">EDOT</a>                                  
060084,000137: 17,3604           61542                           <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#45">E</a>                                     
060085,000138: 17,3605           00006                           <span class="op">EXTEND  </span>                                       
060086,000139: 17,3606           71411                           <span class="op">MP      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#444B4442">DKDB</a>                                  <span class="co">#  PAD LOADED DEADBAND. FRESHSTART: 1.4 DEG</span>
060087,000140: 17,3607           00006                           <span class="op">EXTEND  </span>                                       
060088,000141: 17,3610           13625                           <span class="op">BZF     </span> <a href="#544A5A45524F">TJZERO</a>                                
060089,000142: 
060090,000143: 17,3611           00006                           <span class="op">EXTEND  </span>                                       
060091,000144: 17,3612           63621                           <span class="op">BZMF    </span> +7                                    
060092,000145: 17,3613           31543                           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#45444F54">EDOT</a>                                  
060093,000146: 17,3614           63512                           <span class="op">AD      </span> <a href="#524154454C494D32">RATELIM2</a>                              
060094,000147: 17,3615           00006                           <span class="op">EXTEND  </span>                                       
060095,000148: 17,3616           63625                           <span class="op">BZMF    </span> <a href="#544A5A45524F">TJZERO</a>                                
<a name="4E45475448525354"></a>060096,000149: 17,3617           45011        <span class="sm">NEGTHRST</span>           <span class="op">CS      </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#48414C46">HALF</a>                                  
060097,000150: 17,3620           13542                           <span class="op">TCF     </span> <a href="#504F535448525354">POSTHRST</a>   +1                         
060098,000151: 17,3621           43512                 +7        <span class="op">CS      </span> <a href="#524154454C494D32">RATELIM2</a>                              
060099,000152: 17,3622           61543                           <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#45444F54">EDOT</a>                                  
060100,000153: 17,3623           00006                           <span class="op">EXTEND  </span>                                       
060101,000154: 17,3624           63541                           <span class="op">BZMF    </span> <a href="#504F535448525354">POSTHRST</a>                              
<a name="544A5A45524F"></a>060102,000155: 17,3625           35030        <span class="sm">TJZERO  </span>           <span class="op">CA      </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#5A45524F">ZERO</a>                                  
060103,000156: 17,3626           13542                           <span class="op">TCF     </span> <a href="#504F535448525354">POSTHRST</a>   +1                         
060104,000157: 
060105,000158: 
<a name="524154454C494D31"></a>060106,000159: 17,3627     5036               <span class="sm">RATELIM1</span>           <span class="ps">=       </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#43414C4C434F4445">CALLCODE</a>                              <span class="co">#  = 00032, CORRESPONDING TO 1.73 DEG/SEC</span>
<a name="52415445444231"></a>060107,000160: 17,3627     5037               <span class="sm">RATEDB1 </span>           <span class="ps">=       </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#544255494C444658">TBUILDFX</a>                              <span class="co">#   = 00045, CORRESPONDS TO 0.101 DEG/SEC</span>

End of include-file SPS_BACK-UP_RCS_CONTROL.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
