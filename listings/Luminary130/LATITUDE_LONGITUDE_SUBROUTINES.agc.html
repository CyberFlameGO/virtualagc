<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
This is a reconstructed version of Luminary 130, the initial AGC program released 
in November 1969 for the Apollo 13 LM. Three more releases
followed before the flown revision was finally manufactured in February 1970. 
<br><br>
This reconstruction was created from a previous transcription of the original listing of
Luminary 131, combined with Luminary memo #129 which describes the small difference 
between the Luminary 130 and 131.  The reconstructed source code was verified by 
matching memory-bank checksums to those listed for Luminary 130 in drawing 2021152G.
<br><br>
In this source code, program comments from the original (Luminary 131) code are 
prefixed with '#', while those added later by the Virtual AGC project are prefixed 
with '##'.
</td></tr></tbody></table>

<p class="nobreak">
<span style="font-family: monospace;">
<pre>
047445,000002:                                                                                                  <span class="co">## Copyright:   Public domain.</span>
047446,000003:                                                                                                  <span class="co">## Filename:    LATITUDE_LONGITUDE_SUBROUTINES.agc</span>
047447,000004:                                                                                                  <span class="co">## Purpose:     A section of the reconstructed source code for Luminary 130.</span>
047448,000005:                                                                                                  <span class="co">##              This was the original program released for the Apollo 13 LM,</span>
047449,000006:                                                                                                  <span class="co">##              although several more revisions would follow. It has been</span>
047450,000007:                                                                                                  <span class="co">##              reconstructed from a listing of Luminary 131, from which it</span>
047451,000008:                                                                                                  <span class="co">##              differs on only two lines in P70-P71. The difference is</span>
047452,000009:                                                                                                  <span class="co">##              described in detail in Luminary memo #129, which was used</span>
047453,000010:                                                                                                  <span class="co">##              to perform the reconstruction. This file is intended to be a</span>
047454,000011:                                                                                                  <span class="co">##              faithful reconstruction, except that the code format has been</span>
047455,000012:                                                                                                  <span class="co">##              changed to conform to the requirements of the yaYUL assembler</span>
047456,000013:                                                                                                  <span class="co">##              rather than the original YUL assembler.</span>
047457,000014:                                                                                                  <span class="co">## Reference:   pp. 1127-1133</span>
047458,000015:                                                                                                  <span class="co">## Contact:     Ron Burkey &lt;info@sandroid.org>.</span>
047459,000016:                                                                                                  <span class="co">## Website:     www.ibiblio.org/apollo/index.html</span>
047460,000017:                                                                                                  <span class="co">## Mod history: 05/31/03 RSB.   Began transcribing.</span>
047461,000018:                                                                                                  <span class="co">##              05/14/05 RSB    Corrected website reference above.</span>
047462,000019:                                                                                                  <span class="co">##              2011-01-05 JL   Fixed indentation of RVQ instruction.</span>
047463,000020:                                                                                                  <span class="co">##              2017-01-06 RSB  Page numbers now agree with those on the</span>
047464,000021:                                                                                                  <span class="co">##                              original harcopy, as opposed to the PDF page</span>
047465,000022:                                                                                                  <span class="co">##                              numbers in 1701.pdf.</span>
047466,000023:                                                                                                  <span class="co">##              2017-02-05 RSB  Back-ported comment corrections </span>
047467,000024:                                                                                                  <span class="co">##                              identified while proofing Artemis 072.</span>
047468,000025:                                                                                                  <span class="co">##              2017-02-27 RSB  Proofed comment text using octopus/ProoferComments.</span>
047469,000026:                                                                                                  <span class="co">##              2017-03-13 RSB  Comment-text fixes noted in proofing Luminary 116.</span>
047470,000027:                                                                                                  <span class="co">##              2017-03-15 RSB  Comment-text fixes identified in 5-way</span>
047471,000028:                                                                                                  <span class="co">##                              side-by-side diff of Luminary 69/99/116/131/210.</span>
047472,000029:                                                                                                  <span class="co">##              2018-09-04 MAS  Copied from Luminary 131 for Luminary 130.</span>
047473,000030: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1127
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
047475,000032:                                                                                                  <span class="co">#  SUBROUTINE TO CONVERT RAD VECTOR AT GIVEN TIME TO LAT,LONG AND ALT</span>
047476,000033: 
047477,000034:                                                                                                  <span class="co">#  CALLING SEQUENCE</span>
047478,000035:                                                                                                  <span class="co">#        L-1     CALL</span>
047479,000036:                                                                                                  <span class="co">#        L               LAT-LONG</span>
047480,000037: 
047481,000038:                                                                                                  <span class="co">#  SUBROUTINES USED</span>
047482,000039:                                                                                                  <span class="co">#        R-TO-RP, ARCTAN, SETGAMMA, SETRE</span>
047483,000040: 
047484,000041:                                                                                                  <span class="co">#  ERASABLE INIT. REQ.</span>
047485,000042:                                                                                                  <span class="co">#        AXO, -AYO, AZO, TEPHEM (SET AT LAUNCH TIME)</span>
047486,000043:                                                                                                  <span class="co">#        ALPHAV = POSITION VECTOR METERS B-29</span>
047487,000044:                                                                                                  <span class="co">#        MPAC -- TIME (CSECS B-28)</span>
047488,000045:                                                                                                  <span class="co">#        ERADFLAG =1, TO COMPUTE EARTH RADIUS, =0 FOR FIXED EARTH RADIUS</span>
047489,000046:                                                                                                  <span class="co">#        LUNAFLAG=0 FOR EARTH, 1 FOR MOON</span>
047490,000047: 
047491,000048:                                                                                                  <span class="co">#  OUTPUT</span>
047492,000049:                                                                                                  <span class="co">#        LATITUDE IN LAT         (REVS. B-0)</span>
047493,000050:                                                                                                  <span class="co">#        LONGITUDE IN LONG       (REVS. B-0)</span>
047494,000051:                                                                                                  <span class="co">#        ALTITUDE IN ALT METERS  B-29</span>
047495,000052: 
047496,000053: 30,3766                                           <span class="ps">BANK    </span> 30                                    
047497,000054: 13,2000                                           <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4C41544C4F4E47">LATLONG</a>                               
047498,000055: 13,2000                                           <span class="ps">BANK    </span>                                       
047499,000056: 
047500,000057: 13,2347                                           <span class="ps">COUNT*  </span> $$/LT-LG                              
047501,000058: 13,2347  E4,1431                                  <span class="ps">EBANK=  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>                                
<a name="4C41542D4C4F4E47"></a>047502,000059: 13,2347           40220        <span class="sm">LAT-LONG</span>           <span class="in">STQ     </span> <span class="in">SETPD     </span>                            
047503,000060: 13,2350           03674                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#494E434F52504558">INCORPEX</a>                              
047504,000061: 13,2351           00001                                    0D                                    
047505,000062: 13,2352           24007                           <span class="in">STOVL   </span> 6D                                    <span class="co">#  SAVE TIME IN 6-7D FOR R-TO-RP</span>
047506,000063: 13,2353           02032                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>                                
047507,000064: 13,2354           51406                           <span class="in">PUSH    </span> <span class="in">ABVAL     </span>                            <span class="co">#  0-5D= R FOR R-TO-RP</span>
047508,000065: 13,2355           16070                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414C5048414D">ALPHAM</a>                                <span class="co">#  ABS. VALUE OF R FOR ALT FORMULA BELOW</span>
047509,000066: 13,2356           24007                                    <a href="INTERPRETIVE_CONSTANTS.agc.html#5A45524F564543">ZEROVEC</a>                               <span class="co">#  SET MPAC=0 FOR EARTH, NON-ZERO FOR MOON</span>
047510,000067: 13,2357           71414                           <span class="in">BOFF    </span> <span class="in">COS       </span>                            <span class="co">#  USE COS(0) TO GET NON-ZERO IN MPAC</span>
047511,000068: 13,2360           01743                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#4C554E41464C4147">LUNAFLAG</a>                              <span class="co">#  0=EARTH, 1=MOON</span>
047512,000069: 13,2361           26362                                    <a href="#43414C4C52545250">CALLRTRP</a>                              
<a name="43414C4C52545250"></a>047513,000070: 13,2362           77624        <span class="sm">CALLRTRP</span>           <span class="in">CALL    </span>                                       
047514,000071: 13,2363           51700                                    <a href="PLANETARY_INERTIAL_ORIENTATION.agc.html#522D544F2D5250">R-TO-RP</a>                               <span class="co">#  RP VECTOR CONVERTED FROM R B-29</span>
047515,000072: 13,2364           77656                           <span class="in">UNIT    </span>                                       <span class="co">#  UNIT RP B-1</span>
047516,000073: 13,2365           36032                           <span class="in">STCALL  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>                                <span class="co">#  U2= 1/2 SINL FOR SETRE SUBR BELOW</span>
047517,000074: 13,2366           26546                                    <a href="#53455447414D4D41">SETGAMMA</a>                              <span class="co">#        SET GAMMA=B2/A2 FOR EARTH, =1 FOR MOON</span>
047518,000075: 13,2367           77624                           <span class="in">CALL    </span>                                       <span class="co">#        SCALED B-1</span>
047519,000076: 13,2370           26556                                    <a href="#5345545245">SETRE</a>                                 <span class="co">#  CALC RE METERS B-29</span>
047520,000077: 13,2371           63545                           <span class="in">DLOAD   </span> <span class="in">DSQ       </span>                            
047521,000078: 13,2372           02032                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>                                
047522,000079: 13,2373           63525                           <span class="in">PDDL    </span> <span class="in">DSQ       </span>                            
047523,000080: 13,2374           02034                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>     +2                         
047524,000081: 13,2375           75415                           <span class="in">DAD     </span> <span class="in">SQRT      </span>                            
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1128
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
047526,000083: 13,2376           76405                           <span class="in">DMP     </span> <span class="in">SL1R      </span>                            
047527,000084: 13,2377           00011                                    <a href="#47414D5250">GAMRP</a>                                 
047528,000085: 13,2400           14021                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#434F535448">COSTH</a>                                 <span class="co">#  COS(LAT) B-1</span>
047529,000086: 13,2401           02036                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>     +4                         
047530,000087: 13,2402           34023                           <span class="in">STCALL  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#53494E5448">SINTH</a>                                 <span class="co">#  SIN(LAT) B-1</span>
047531,000088: 13,2403           26506                                    <a href="#41524354414E">ARCTAN</a>                                
047532,000089: 13,2404           15120                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4154">LAT</a>                                   <span class="co">#  LAT B0</span>
047533,000090: 13,2405           02032                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>                                
047534,000091: 13,2406           14021                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#434F535448">COSTH</a>                                 <span class="co">#  COS(LONG) B-1</span>
047535,000092: 13,2407           02034                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>     +2                         
047536,000093: 13,2410           34023                           <span class="in">STCALL  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#53494E5448">SINTH</a>                                 <span class="co">#  SIN(LONG) B-1</span>
047537,000094: 13,2411           26506                                    <a href="#41524354414E">ARCTAN</a>                                
047538,000095: 13,2412           15122                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4F4E47">LONG</a>                                  <span class="co">#  LONG. REVS B-0 IN RANGE -1/2 TO 1/2</span>
047539,000096: 13,2413           02070                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#414C5048414D">ALPHAM</a>                                
047540,000097: 13,2414           77625                           <span class="in">DSU     </span>                                       <span class="co">#  ALT= R-RE METERS B-29</span>
047541,000098: 13,2415           03673                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#455241444D">ERADM</a>                                 
047542,000099: 13,2416           35124                           <span class="in">STCALL  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414C54">ALT</a>                                   <span class="co">#  EXIT WITH ALT METERS B-29</span>
047543,000100: 13,2417           03674                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#494E434F52504558">INCORPEX</a>                              
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1129
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
047545,000102:                                                                                                  <span class="co">#  SUBROUTINE TO CONVERT LAT,LONG,ALT AT GIVEN TIME TO RADIUS VECTOR</span>
047546,000103: 
047547,000104:                                                                                                  <span class="co">#  CALLING SEQUENCE</span>
047548,000105:                                                                                                  <span class="co">#        L-1     CALL</span>
047549,000106:                                                                                                  <span class="co">#        L               LALOTORV</span>
047550,000107: 
047551,000108:                                                                                                  <span class="co">#  SUBROUTINES USED</span>
047552,000109:                                                                                                  <span class="co">#        SETGAMMA, SETRE, RP-TO-R</span>
047553,000110: 
047554,000111:                                                                                                  <span class="co">#  ERASABLE INIT. REQ.</span>
047555,000112:                                                                                                  <span class="co">#        AXO, AYO, AZO, TEPHEM SET AT LAUNCH TIME</span>
047556,000113:                                                                                                  <span class="co">#        LAT -- LATITUDE         (REVS B0)</span>
047557,000114:                                                                                                  <span class="co">#        LONG -- LONGITUDE       (REVS B0)</span>
047558,000115:                                                                                                  <span class="co">#        ALT -- ALTITUDE         (METERS) B-29</span>
047559,000116:                                                                                                  <span class="co">#        MPAC -- TIME            (CSECS B-28)</span>
047560,000117:                                                                                                  <span class="co">#        ERADFLAG =1 TO COMPUTE EARTH RADIUS, =0 FOR FIXED EARTH RADIUS</span>
047561,000118:                                                                                                  <span class="co">#        LUNAFLAG=0 FOR EARTH, 1 FOR MOON</span>
047562,000119: 
047563,000120:                                                                                                  <span class="co">#  OUTPUT</span>
047564,000121:                                                                                                  <span class="co">#        R-VECTOR IN ALPHAV      (METERS B-29)</span>
047565,000122: 
<a name="4C414C4F544F5256"></a>047566,000123: 13,2420           40220        <span class="sm">LALOTORV</span>           <span class="in">STQ     </span> <span class="in">SETPD     </span>                            <span class="co">#  LAT,LONG,ALT TO R VECTOR</span>
047567,000124: 13,2421           03674                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#494E434F52504558">INCORPEX</a>                              
047568,000125: 13,2422           00001                                    0D                                    
047569,000126: 13,2423           34007                           <span class="in">STCALL  </span> 6D                                    <span class="co">#  6-7D= TIME FOR RP-TO-R</span>
047570,000127: 13,2424           26546                                    <a href="#53455447414D4D41">SETGAMMA</a>                              <span class="co">#  GAMMA=B2/A2 FOR EARTH, 1 FOR MOON B-1</span>
047571,000128: 13,2425           73545                           <span class="in">DLOAD   </span> <span class="in">SIN       </span>                            <span class="co">#            COS(LONG)COS(LAT) IN MPAC</span>
047572,000129: 13,2426           01120                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4154">LAT</a>                                   <span class="co">#  UNIT RP = SIN(LONG)COS(LAT)    2-3D</span>
047573,000130: 13,2427           65275                           <span class="in">DMPR    </span> <span class="in">PDDL      </span>                            <span class="co">#  PD 2      GAMMA*SIN(LAT)       0-1D</span>
047574,000131: 13,2430           00011                                    <a href="#47414D5250">GAMRP</a>                                 
047575,000132: 13,2431           01120                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4154">LAT</a>                                   <span class="co">#      0-1D= GAMMA*SIN(LAT) B-2</span>
047576,000133: 13,2432           65346                           <span class="in">COS     </span> <span class="in">PDDL      </span>                            <span class="co">#  PD4 2-3D= COS(LAT) B-1 TEMPORARILY</span>
047577,000134: 13,2433           01122                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4F4E47">LONG</a>                                  
047578,000135: 13,2434           57356                           <span class="in">SIN     </span> <span class="in">DMPR      </span>                            <span class="co">#  PD 2</span>
047579,000136: 13,2435           71525                           <span class="in">PDDL    </span> <span class="in">COS       </span>                            <span class="co">#  PD 4 2-3D = SIN(LONG)COS(LAT) B-2</span>
047580,000137: 13,2436           01120                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4154">LAT</a>                                   
047581,000138: 13,2437           71525                           <span class="in">PDDL    </span> <span class="in">COS       </span>                            <span class="co">#  PD 6 4-5D = COS(LAT) B-1 TEMPORARILY</span>
047582,000139: 13,2440           01122                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4F4E47">LONG</a>                                  
047583,000140: 13,2441           55475                           <span class="in">DMPR    </span> <span class="in">VDEF      </span>                            <span class="co">#  PD4 MPAC= COS(LONG)COS(LAT) B-2</span>
047584,000141: 13,2442           41456                           <span class="in">UNIT    </span> <span class="in">PUSH      </span>                            <span class="co">#  0-5D= UNIT RP FOR RP-TO-R SUBR.</span>
047585,000142: 13,2443           36032                           <span class="in">STCALL  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>                                <span class="co">#  ALPHAV +4= SINL FOR SETRE SUBR.</span>
047586,000143: 13,2444           26556                                    <a href="#5345545245">SETRE</a>                                 <span class="co">#  RE METERS B-29</span>
047587,000144: 13,2445           43145                           <span class="in">DLOAD   </span> <span class="in">BOFF      </span>                            <span class="co">#  SET MPAC=0 FOR EARTH, NON-ZERO FOR MOON</span>
047588,000145: 13,2446           24007                                    <a href="INTERPRETIVE_CONSTANTS.agc.html#5A45524F564543">ZEROVEC</a>                               
047589,000146: 13,2447           01743                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#4C554E41464C4147">LUNAFLAG</a>                              
047590,000147: 13,2450           26452                                    <a href="#43414C4C52505254">CALLRPRT</a>                              
047591,000148: 13,2451           77746                           <span class="in">COS     </span>                                       <span class="co">#  USE COS(0) TO GET NON-ZERO IN MPAC</span>
<a name="43414C4C52505254"></a>047592,000149: 13,2452           77624        <span class="sm">CALLRPRT</span>           <span class="in">CALL    </span>                                       
047593,000150: 13,2453           55716                                    <a href="PLANETARY_INERTIAL_ORIENTATION.agc.html#52502D544F2D52">RP-TO-R</a>                               <span class="co">#  EXIT WITH UNIT R VECTOR IN MPAC</span>
047594,000151: 13,2454           16032                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>                                
047595,000152: 13,2455           03673                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#455241444D">ERADM</a>                                 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1130
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
047597,000154: 13,2456           74215                           <span class="in">DAD     </span> <span class="in">VXSC      </span>                            <span class="co">#  (RE + ALT)(UNIT R) METERS B-30</span>
047598,000155: 13,2457           01124                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#414C54">ALT</a>                                   
047599,000156: 13,2460           02032                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>                                
047600,000157: 13,2461           77772                           <span class="in">VSL1    </span>                                       <span class="co">#  R METERS B-29</span>
047601,000158: 13,2462           36032                           <span class="in">STCALL  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>                                <span class="co">#  EXIT WITH R IN METERS B-29</span>
047602,000159: 13,2463           03674                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#494E434F52504558">INCORPEX</a>                              
047603,000160: 
047604,000161:                                                                                                  <span class="co">#  SUBROUTINE TO COMPUTE EARTH RADIUS</span>
047605,000162: 
047606,000163:                                                                                                  <span class="co">#  INPUT</span>
047607,000164:                                                                                                  <span class="co">#        1/2 SIN LAT IN ALPHAV +4</span>
047608,000165: 
047609,000166:                                                                                                  <span class="co">#  OUTPUT</span>
047610,000167:                                                                                                  <span class="co">#        EARTH RADIUS IN ERADM AND MPAC (METERS B-29)</span>
047611,000168: 
<a name="47455445524144"></a>047612,000169: 13,2464           63545        <span class="sm">GETERAD </span>           <span class="in">DLOAD   </span> <span class="in">DSQ       </span>                            
047613,000170: 13,2465           02036                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>     +4                         <span class="co">#  SIN**2(L)</span>
047614,000171: 13,2466           44352                           <span class="in">SL1     </span> <span class="in">BDSU      </span>                            
047615,000172: 13,2467           24005                                    <a href="#4450312F32">DP1/2</a>                                 <span class="co">#  COS**2(L)</span>
047616,000173: 13,2470           44275                           <span class="in">DMPR    </span> <span class="in">BDSU      </span>                            
047617,000174: 13,2471           26505                                    <a href="#4545">EE</a>                                    
047618,000175: 13,2472           24005                                    <a href="#4450312F32">DP1/2</a>                                 
047619,000176: 13,2473           75465                           <span class="in">BDDV    </span> <span class="in">SQRT      </span>                            
047620,000177: 13,2474           26501                                    <a href="#4232585343">B2XSC</a>                                 
047621,000178: 13,2475           77622                           <span class="in">SR4R    </span>                                       
047622,000179: 13,2476           03673                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#455241444D">ERADM</a>                                 
047623,000180: 13,2477           77616                           <span class="in">RVQ     </span>                                       
047624,000181: 
047625,000182:                                                                                                  <span class="co">#  THE FOLLOWING CONSTANTS WERE COMPUTED WITH A=6378166, B=6356784 METERS</span>
047626,000183:                                                                                                  <span class="co">#  B2XSC = B**2 SCALED B-51</span>
047627,000184:                                                                                                  <span class="co">#  B2/A2 = B**2/A**2 SCALED B-1</span>
047628,000185:                                                                                                  <span class="co">#  EE = (1-B**2/A**2) SCALED B-0</span>
047629,000186: 
<a name="4232585343"></a>047630,000187: 13,2500           00446 00305  <span class="sm">B2XSC   </span>           <span class="ps">2DEC    </span> .0179450689                            <span class="co">#  B**2 SCALED B-51</span>
<a name="4450312F32"></a>047631,000188: 13,2502  12,2004               <span class="sm">DP1/2   </span>           <span class="ps">=       </span> <a href="INTERPRETIVE_CONSTANTS.agc.html#58554E4954">XUNIT</a>                                 
<a name="42322F4132"></a>047632,000189: 13,2502           17711 05254  <span class="sm">B2/A2   </span>           <span class="ps">2DEC    </span> .9933064884 B-1                        <span class="co">#  GAMMA= B**2/A**2 B-1</span>
<a name="4545"></a>047633,000190: 13,2504           00155 25250  <span class="sm">EE      </span>           <span class="ps">2DEC    </span> 6.6935116  E-3                        <span class="co">#  (1-B**2/A**2) B-0</span>
047634,000191: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1131
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
047636,000193:                                                                                                  <span class="co">#  ARCTAN SUBROUTINE</span>
047637,000194: 
047638,000195:                                                                                                  <span class="co">#  CALLING SEQUENCE</span>
047639,000196:                                                                                                  <span class="co">#        SIN THETA IN SINTH B-1</span>
047640,000197:                                                                                                  <span class="co">#        COS THETA IN COSTH B-1</span>
047641,000198:                                                                                                  <span class="co">#        CALL ARCTAN</span>
047642,000199: 
047643,000200:                                                                                                  <span class="co">#  OUTPUT</span>
047644,000201:                                                                                                  <span class="co">#        ARCTAN THETA IN MPAC AND THETA B-0 IN RANGE -1/2 TO +1/2</span>
047645,000202: 
<a name="41524354414E"></a>047646,000203: 13,2506           77600        <span class="sm">ARCTAN  </span>           <span class="in">BOV     </span>                                       
047647,000204: 13,2507           26510                                    <a href="#434C524F56464C57">CLROVFLW</a>                              
<a name="434C524F56464C57"></a>047648,000205: 13,2510           63545        <span class="sm">CLROVFLW</span>           <span class="in">DLOAD   </span> <span class="in">DSQ       </span>                            
047649,000206: 13,2511           00023                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#53494E5448">SINTH</a>                                 
047650,000207: 13,2512           63525                           <span class="in">PDDL    </span> <span class="in">DSQ       </span>                            
047651,000208: 13,2513           00021                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#434F535448">COSTH</a>                                 
047652,000209: 13,2514           77615                           <span class="in">DAD     </span>                                       
047653,000210: 13,2515           75454                           <span class="in">BZE     </span> <span class="in">SQRT      </span>                            
047654,000211: 13,2516           26534                                    <a href="#41524354414E5858">ARCTANXX</a>                              <span class="co">#  ATAN=0/0  SET THETA=0</span>
047655,000212: 13,2517           40065                           <span class="in">BDDV    </span> <span class="in">BOV       </span>                            
047656,000213: 13,2520           00023                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#53494E5448">SINTH</a>                                 
047657,000214: 13,2521           26541                                    <a href="#4154414E3D3930">ATAN=90</a>                               
047658,000215: 13,2522           67542                           <span class="in">SR1     </span> <span class="in">ASIN      </span>                            
047659,000216: 13,2523           00025                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5448455441">THETA</a>                                 
047660,000217: 13,2524           50125                           <span class="in">PDDL    </span> <span class="in">BMN       </span>                            
047661,000218: 13,2525           00021                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#434F535448">COSTH</a>                                 
047662,000219: 13,2526           26530                                    <a href="#4E4547434F53">NEGCOS</a>                                
047663,000220: 13,2527           43545                           <span class="in">DLOAD   </span> <span class="in">RVQ       </span>                            
<a name="4E4547434F53"></a>047664,000221: 13,2530           57545        <span class="sm">NEGCOS  </span>           <span class="in">DLOAD   </span> <span class="in">DCOMP     </span>                            
047665,000222: 13,2531           43244                           <span class="in">BPL     </span> <span class="in">DAD       </span>                            
047666,000223: 13,2532           26536                                    <a href="#4E45474F5554">NEGOUT</a>                                
047667,000224: 13,2533           24005                                    <a href="#4450312F32">DP1/2</a>                                 
<a name="41524354414E5858"></a>047668,000225: 13,2534           00025        <span class="sm">ARCTANXX</span>           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5448455441">THETA</a>                                 
047669,000226: 13,2535           77616                           <span class="in">RVQ     </span>                                       
047670,000227: 
<a name="4E45474F5554"></a>047671,000228: 13,2536           52025        <span class="sm">NEGOUT  </span>           <span class="in">DSU     </span> <span class="in">GOTO      </span>                            
047672,000229: 13,2537           24005                                    <a href="#4450312F32">DP1/2</a>                                 
047673,000230: 13,2540           26534                                    <a href="#41524354414E5858">ARCTANXX</a>                              
<a name="4154414E3D3930"></a>047674,000231: 13,2541           75345        <span class="sm">ATAN=90 </span>           <span class="in">DLOAD   </span> <span class="in">SIGN      </span>                            
047675,000232: 13,2542           11003                                    <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4C4F4450312F34">LODP1/4</a>                               
047676,000233: 13,2543           00023                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#53494E5448">SINTH</a>                                 
047677,000234: 13,2544           00025                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5448455441">THETA</a>                                 
047678,000235: 13,2545           77616                           <span class="in">RVQ     </span>                                       
047679,000236: 
<a name="32445A45524F"></a>047680,000237: 13,2546  12,2006               <span class="sm">2DZERO  </span>           <span class="ps">=       </span> <a href="ORBITAL_INTEGRATION.agc.html#44505A45524F">DPZERO</a>                                
047681,000238: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1132
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
047683,000240:                                                                                                  <span class="co">#  ..... SETGAMMA SUBROUTINE .....</span>
047684,000241:                                                                                                  <span class="co">#  SUBROUTINE TO SET GAMMA FOR THE LAT-LONG AND LALOTORV SUBROUTINES</span>
047685,000242: 
047686,000243:                                                                                                  <span class="co">#  GAMMA = B**2/A**2 FOR EARTH (B-1)</span>
047687,000244:                                                                                                  <span class="co">#  GAMMA = 1 FOR MOON (B-1)</span>
047688,000245: 
047689,000246:                                                                                                  <span class="co">#  CALLING SEQUENCE</span>
047690,000247:                                                                                                  <span class="co">#        L       CALL</span>
047691,000248:                                                                                                  <span class="co">#        L+1             SETGAMMA</span>
047692,000249: 
047693,000250:                                                                                                  <span class="co">#  INPUT</span>
047694,000251:                                                                                                  <span class="co">#        LUNAFLAG=0 FOR EARTH, =1 FOR MOON</span>
047695,000252: 
047696,000253:                                                                                                  <span class="co">#  OUTPUT</span>
047697,000254:                                                                                                  <span class="co">#        GAMMA IN GAMRP (B-1)</span>
047698,000255: 
<a name="53455447414D4D41"></a>047699,000256: 13,2546           43145        <span class="sm">SETGAMMA</span>           <span class="in">DLOAD   </span> <span class="in">BOFF      </span>                            <span class="co">#  BRANCH FOR EARTH</span>
047700,000257: 13,2547           26503                                    <a href="#42322F4132">B2/A2</a>                                 <span class="co">#  EARTH GAMMA</span>
047701,000258: 13,2550           01743                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#4C554E41464C4147">LUNAFLAG</a>                              
047702,000259: 13,2551           26554                                    <a href="#534554474D4558">SETGMEX</a>                               
047703,000260: 13,2552           77735                           <span class="in">SLOAD   </span>                                       
047704,000261: 13,2553           24005                                    <a href="PLANETARY_INERTIAL_ORIENTATION.agc.html#314231">1B1</a>                                   <span class="co">#  MOON GAMMA</span>
<a name="534554474D4558"></a>047705,000262: 13,2554           00011        <span class="sm">SETGMEX </span>           <span class="in">STORE   </span> <a href="#47414D5250">GAMRP</a>                                 
047706,000263: 13,2555           77616                           <span class="in">RVQ     </span>                                       
<a name="47414D5250"></a>047707,000264: 13,2556                        <span class="sm">GAMRP   </span>           <span class="ps">=       </span> 8D                                    
047708,000265: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1133
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
047710,000267:                                                                                                  <span class="co">#  ..... SETRE SUBROUTINE .....</span>
047711,000268:                                                                                                  <span class="co">#  SUBROUTINE TO SET RE (EARTH OR MOON RADIUS)</span>
047712,000269: 
047713,000270:                                                                                                  <span class="co">#        RE = RM FOR MOON</span>
047714,000271:                                                                                                  <span class="co">#        RE = RREF FOR FIXED EARTH RADIUS OR COMPUTED RF FOR FISCHER ELLIPSOID</span>
047715,000272: 
047716,000273:                                                                                                  <span class="co">#  CALLING SEQUENCE</span>
047717,000274:                                                                                                  <span class="co">#        L       CALL</span>
047718,000275:                                                                                                  <span class="co">#        L+1             SETRE</span>
047719,000276: 
047720,000277:                                                                                                  <span class="co">#  SUBROUTINES USED</span>
047721,000278:                                                                                                  <span class="co">#        GETERAD</span>
047722,000279: 
047723,000280:                                                                                                  <span class="co">#  INPUT</span>
047724,000281:                                                                                                  <span class="co">#        ERADFLAG = 0 FOR FIXED RE, 1 FOR COMPUTED RE</span>
047725,000282:                                                                                                  <span class="co">#        ALPHAV +4 = 1/2 SINL IF GETERAD IS CALLED</span>
047726,000283:                                                                                                  <span class="co">#        LUNAFLAG = 0 FOR EARTH, =1 FOR MOON</span>
047727,000284: 
047728,000285:                                                                                                  <span class="co">#  OUTPUT</span>
047729,000286:                                                                                                  <span class="co">#        ERADM = 504RM FOR MOON (METERS B-29)</span>
047730,000287:                                                                                                  <span class="co">#        ERADM = ERAD OR COMPUTED RF FOR EARTH (METERS B-29)</span>
047731,000288: 
<a name="5345545245"></a>047732,000289: 13,2556           71220        <span class="sm">SETRE   </span>           <span class="in">STQ     </span> <span class="in">DLOAD     </span>                            
047733,000290: 13,2557           00051                                    <a href="#534554524558">SETREX</a>                                
047734,000291: 13,2560           10003                                    <a href="CONTROLLED_CONSTANTS.agc.html#353034524D">504RM</a>                                 
047735,000292: 13,2561           71214                           <span class="in">BON     </span> <span class="in">DLOAD     </span>                            <span class="co">#  BRANCH FOR MOON</span>
047736,000293: 13,2562           01703                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#4C554E41464C4147">LUNAFLAG</a>                              
047737,000294: 13,2563           26573                                    <a href="#545354524C53524D">TSTRLSRM</a>                              
047738,000295: 13,2564           10001                                    <a href="CONTROLLED_CONSTANTS.agc.html#45524144">ERAD</a>                                  
047739,000296: 13,2565           45014                           <span class="in">BOFF    </span> <span class="in">CALL      </span>                            <span class="co">#  ERADFLAG=0 FOR FIXED RE, 1 FOR COMPUTED</span>
047740,000297: 13,2566           00742                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#45524144464C4147">ERADFLAG</a>                              
047741,000298: 13,2567           26571                                    <a href="#534554525858">SETRXX</a>                                
047742,000299: 13,2570           26464                                    <a href="#47455445524144">GETERAD</a>                               
<a name="534554525858"></a>047743,000300: 13,2571           37673        <span class="sm">SETRXX  </span>           <span class="in">STCALL  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#455241444D">ERADM</a>                                 <span class="co">#  EXIT WITH RE OR RM METERS B-29</span>
047744,000301: 13,2572           00051                                    <a href="#534554524558">SETREX</a>                                
<a name="545354524C53524D"></a>047745,000302: 13,2573           77214        <span class="sm">TSTRLSRM</span>           <span class="in">BON     </span> <span class="in">VLOAD     </span>                            <span class="co">#  ERADFLAG=0, SET R0=RLS</span>
047746,000303: 13,2574           00702                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#45524144464C4147">ERADFLAG</a>                              <span class="co">#          =1      R0=RM</span>
047747,000304: 13,2575           26571                                    <a href="#534554525858">SETRXX</a>                                
047748,000305: 13,2576           02023                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#524C53">RLS</a>                                   
047749,000306: 13,2577           64446                           <span class="in">ABVAL   </span> <span class="in">SR2R      </span>                            <span class="co">#  SCALE FROM B-27 TO B-29</span>
047750,000307: 13,2600           77650                           <span class="in">GOTO    </span>                                       
047751,000308: 13,2601           26571                                    <a href="#534554525858">SETRXX</a>                                
<a name="534554524558"></a>047752,000309: 13,2602  0000051               <span class="sm">SETREX  </span>           <span class="ps">=       </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5332">S2</a>                                    
047753,000310: 
047754,000311: 

End of include-file LATITUDE_LONGITUDE_SUBROUTINES.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
