Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4

====== Flowchart FC-2300 Incorporation in Comanche 67 ======

([[comanche-67-reconstruction|Return to the main Comanche 67 reconstruction page.]])

We have the Colossus 2C (and 2D) revisions of FC-2300, but no list of sheets changed from prior revisions. Alas, that leaves us with no choice but to compare the flowchart (50 sheets!) to the reconstructed code. As a time-saving workaround, I'll only do the comparison for subroutines for which there is some code mismatch between Colossus 237 vs Comanche 55 vs Artemis 71. When all three of those versions agree for some particular subroutine, I'll skip the comparison to the flowchart, because there's no way I could resolve a conflict anyway.

==== Sheet 1 ====

Cover sheet only.

==== Sheet 2 ====

A top level flow that doesn't have enough detail for code comparison. More-detailed flowcharts of the same subroutines come on later sheets.

==== Sheet 3 ====

TESTLOOP, NORFINAL: In interpreting this code, it's helpful to recall that ABVAL computes the absolute value of the scalar (or length of the vector) in MPAC, but also leaves the square of the absolute value in position 34D of the pushdown list. In NORFINAL, in the midst of several right-shift operations, there is in interpretive instruction

	''DLOAD	MPAC''

which is rather confusing. I wonder if the right shifts don't convert the double-precision value in MPAC into a triple-precision value, and the purpose of the DLOAD is to truncate it back to double precision? If so, it's understandable in terms of the comments in the flowchart, and if not, it's non-functional anyway, so I guess it's okay.

Otherwise, looks good.

==== Sheet 4 ====

Continuation of NORFINAL, MAXDT, DT/2COMP: Looks good.

==== Sheet 5 ====

Continuation of DT/2COMP, GETMAXDT, USEMAXDT, POOHCHK: Looks good.

==== Sheet 6 ====

Continuation of POOHCHK, TIMESTEP, RECTEST, DOSWITCH: Looks good.

==== Sheet 7 ====

Continuation of RECTEST and DOSWITCH, CALLRECT: Looks good. (RECTEST and CALLRECT identical for Colossus 237/Comanche 55/ Artemis 71.)

==== Sheet 8 ====

INTGRATE, DIFEQ0: Identical for 237/55/71.

==== Sheet 9 ====

ACCOMP: This sheet identical for 237/55/71.

==== Sheet 10 ====

Continuation of ACCOMP: This sheet identical for 237/55/71.

==== Sheet 11 ====

Continuation of ACCOMP: This sheet identical for 237/55/71.

==== Sheet 12 ====

Continuation of ACCOMP: Looks good. (This sheet //not// identical for 237/55/71.)

==== Sheet 13 ====

GETRPSV: Identical for 237/55/71.

==== Sheet 14 ====

OBLATE: This sheet identical for 237/55/71 ... though frankly, I don't quite see how it matches the flowchart.

==== Sheet 15 ====

Continuation of OBLATE, COSPHIE, COMTERM: COSPHIE is identical for 237/55/71.

However, the flowcharts for the continuation of OBLATE and the beginning of COMTERM do not match the reconstructed Comanche 67 code, but rather match the Comanche 55 code. The reconstructed code is per PCR-772.1 and PCR-776.1, and the reconstruction in that area of the code was performed by importing code from Luminary 116 or Artemis. But regardless of where the reconstructed code came from, it should definitely //differ// from Comanche 55. (Unless, of course, I'm //totally// confused about how to incorporate the PCRs, and the PCRs applied to an entirely different area of code.)

I've just now double-checked, and according to the Colossus 3 and Luminary 1E GSOPs, PCR-772.1 and PCR-776.1 were supposed to have been incorporated in Comanche 67, while PCR-772.2 and PCR-776.2 were supposed to have been incorporated in Luminary 116. I've looked also at the Colossus 2D revision of the flowchart, and this sheet appears identical (other than title block) to the 2C revision.

Actually, even the title blocks of this sheet of the 2C and 2D flowcharts appears to be identical, except that in the 2D revision a Rev. number (1) has been added, and for "COLOSSUS IIC", the "IIC" has been erased and "2D" has been added below the "COLOSSUS". Even the signature dates for "drawn by", "analyst", and "appr'd" haven't changed (23 OCT 68", "22 SEPT 69", "9-23-69"). So somehow it went from 2C to 2D without even being approved.

I guess it's hard to escape the conclusion that one of the following two things has happened:

1. FC-2300 was being rubber-stamped at some level (whether it was a technical or managerial level I can't tell from this minimal), and neither the 2C nor 2D revisions of the flowchart can be relied upon to reflect the state of the code. That's kind of hard to credit, given that multiple PCRs were driving changes to this area of the code.
2. The incorporation of PCR-772.1 and PCR-776.1 in the reconstruction has been done completely wrong, to the extent of applying to a completely different area of source code. That also is difficult to credit, since the reconstruction changes are due to multiple, mostly-independent analyses. I would be more likely to credit small areas of error. But nevertheless, the possibility exists.

**âš ** Given that I'm responsible for the analyses in #2 above, I'm naturally inclined to credit possibility #1 more than #2; it's an unavoidable blind spot, I'm afraid, until a lot more time passes. Unfortunately, this inference seems to render the whole idea of comparing FC-2300 to code problematic. Unfortunately, it's the only tool I have right now, so I'll continue the comparison and hope that this level of carelessness doesn't persist throughout the entirety of FC-2300; or alternately, if the application of PCR-772.1 and PCR-776.1 were (both) completely wrong, hopefully it will show up in other flowcharts.

==== Sheets 16-20 ====

Continuation of COMTERM: Per the comments for sheet 15, I'm simply ignoring COMTERM, since the influence of PCR-772.1 persists throughout most of this subroutine.

I should clarify that the flowchart does not match Comanche 55 in its entirety, since [[memory-bank-assignments-for-comanche-67|as I explain elsewhere]], the flowchart lacks the split-out of portions of COMTERM as new subroutines QUALITY1 and QUALITY2, used apparently to work around memory overflows in fixed bank 11. I simply don't know the extent to which FC-2300 matches different revisions of the code.

==== Sheet 21 ====

NBRANCH: Identical in 237/55/71.

==== Sheet 22 ====

GOBAQUE, INT-ABRT: Looks good.

==== Sheet 23-26 ====

GAMCOMP: Identical in 237/55/71.

==== Sheet 27 ====

DIFEQ+0, DIFEQ+1, DEFEQCOM: Identical in 237/55/71.

==== Sheet 28 ====

FBR3: Identical in 237/55/71.

==== Sheet 29-31 ====

KEPPREP: Identical in 237/55/71.

==== Sheet 32-35 ====

DIFEQ+2, ENDSTATE, AMOVED, NEXTCOL, RELOADSV: Identical in 237/55/71.

==== Sheet 36 ====

CKMID2, MID2, TIMEINC: CKMID2 is identical in 237/55/71.

MID2 looks good.

TIMEINC looks good.

==== Sheet 37 ====

WMATEND: Identical in 237/55/71.

==== Sheet 38-39 ====

A-PCHK, ANDOUT, PHEXIT: A-PCHK looks good. ANDOUT and PHEXIT are identical in 237/55/71.

==== Sheet 40 ====

Continuation of RECTOUT, INTEXIT: RECTOUT is identical in 237/55/71.

INTEXIT: Recalling that BOV clears the overflow indicator (a variable) as a side effect, the only thing I observe is that the flowchart doesn't indicate that the return address is indexed by FIXLOC as the code does. However, that particular feature is identical in 237/55/71, so I accept it.

==== Sheet 41 ====

DOW..: Identical in 237/55/71.

==== Sheet 42 ====

DOW..1: Identical in 237/55/71.

==== Sheet 43 ====

RECITIFY, MINIRECT: Identical in 237/55/71, other than the addition of an extra program label (TINIRECT) in Artemis that doesn't affect the rope.

==== Sheet 44 ====

ORIGCHNG, SETMOON, CLRMOON: Identical in 237/55/71.

==== Sheet 45 ====

CHKSWITCH, RPQOK, EARSPH: Looks good.

==== Sheet 46-50 ====

Tables, not flowcharts.

