Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4

====== Flowchart FC-2310 Incorporation in Comanche 67 ======

([[comanche-67-reconstruction|Return to the main Comanche 67 reconstruction page.]])

We have the Colossus 2C revision of FC-2310, although it has serious legibility problems. The cover sheet seems to say that only sheets 12, 18, and 23 have changed from Colossus 2A to 2C.

==== Sheet 12 ====

Executive summary: I'm going to say a bunch of bad things here about how the flowchart doesn't match the code. I didn't realize when I wrote it that this is an upper-level flowchart that wouldn't match the code in detail anyway. For example, the main thing represented on this sheet is LAMBLOOP, which is actually covered in low-level detail on sheet 17. In other words, none of the bad stuff I'm going to say now about sheet 12 matters, because sheet 12 itself doesn't matter.

LAMBLOOP: Because of legibility problems and complexity, I've tried to use the principle that if the code of Colossus 237, Comanche 55, and Artemis 71 all match, then there's no point in comparing the flowchart to the code, since even if the flowchart and code didn't match, there would be no way to resolve the discrepancy anyway. In the case of LAMBLOOP, the initial portion of the corresponding code is identical in 237/55/71, but it's different in the latter portion of the subroutine, and a direct flowchart comparison is needed there. The following detail is from the flowchart at the point where the 237/55/71 code no longer appears identical:

{{../fc2310Sheet12A.png}}

And here is the corresponding reconstructed code:

	'''
			BPL	RTB 
				INITV 
				CHECKCTR 
			BHIZ	BON 
				SUFFCHEK 
				SLOPESW 
				GOITER 
			DLOAD	DSU 
				T 
				TPREV 
			BZE 
				SUFFCHEK
	GOITER		CALL 
				ITERATOR 
			DLOAD	BZE 
				MPAC 
				SUFFCHEK 
			DAD 
				COGA 
			STCALL	COGA 
				LAMBLOOP
	'''


Thus the decision box at the top of the graphic corresponds to the BPL to INITV (which is out of sight at the right-hand edge of the graphic).

It's not so much that the code is //wrong// with respect to the flowchart, or vice-versa, as that so many assumptions have to be made as to what the flowchart might mean that it becomes very tricky to compare them. For example, is this

{{../fc2310Sheet12B.png}}

really equivalent to

'''
	RTB	CHECKCTR
'''

Is this

{{../fc2310Sheet12C.png}}

really equivalent to

'''
			BHIZ	BON 
				SUFFCHEK 
				SLOPESW 
				GOITER 
			DLOAD	DSU 
				T 
				TPREV 
			BZE 
				SUFFCHEK
	GOITER		...
'''

**⚠** Well, maybe it is, but it doesn't look like it to me. I fear that this issue has exceeded my skill or my patience, or both. The reconstructed code does match Artemis 71 but not (due to PCR-831.1) Colossus 237, which is not surprising since Artemis 71 is where I copied it from in resolving PCR-831.1.

HIENERGY, LOENERGY: The good news is that HIENERGY and LOENERGY are identical in 237/55/71 (except that a GOTO to COMMONLM in Colossus 237 has been replaced by a CALL to COMMONLM in Comanche and Artemis).  That bad news is that both of these (in the code) feed into COMMONLM, which does not even appear on the flowchart at all. My guess is that an entry point for COMMONLM should appear in the flowchart smack in the middle of this:

{{../fc2310Sheet12D.png}}

**⚠** Sadly, even with this assumption, HIENERGY and LOENERGY are still doing a number of things not mentioned in the flowchart, such as adjusting the pushdown-list index and COGAMIN. On a good note, COMMONLM differs among 237/55/71 only in that a GOTO to LAMBLOOP in Colossus 237 has been replaced by a CALL in Comanche and Artemis.

SUFFCHEK, 360LAMB, INITV, BIGTIME, NEGP: On another good note, these are identical in 237/55/71.

==== Sheet 18 ====

Continuation of LAMBLOOP (from sheet 17, //not// sheet 12): As with the comments about sheet 12 above, however, the initial part of LAMBLOOP matches across 237/55/71, so the only part of the flowchart we need to care about is where it ceases to be a match:

{{../fc2310Sheet18.png}}

Which corresponds to the code

'''
			BHIZ	BON 
				SUFFCHEK 
				SLOPESW 
				GOITER 
			DLOAD	DSU 
				T 
				TPREV 
			BZE 
				SUFFCHEK
	GOITER		...
'''

Which seems to be a match.

==== Sheet 23 ====

TIMERAD, CIRCULAR, ABTCONIC: Looks good.

