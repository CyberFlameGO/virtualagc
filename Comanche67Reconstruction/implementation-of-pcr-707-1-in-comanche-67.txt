Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4

====== PCR-701.1 Incorporation in Comanche 67 ======

([[comanche-67-reconstruction|Return to main Comanche 67 reconstruction page.]])

Let's deal with PCR-707.1 first and temporarily ignore PCR-773.1. As usual, we have no copy of PCR-707.1, "Change from 1968 / 1969 Ephemeris Data to 1969 / 1970 Ephemeris Data".

Note the same change was incorporated into Luminary, due to PCR-707.2 (same title), which we also don't have, in Luminary 1A (Luminary 99). (The Luminary 1E GSOP section 5 indicates that PCR-707.2 was incorporated in section 5 revision 4, but does not identify revision 4 with Luminary 1A. However, [[pcr-659-1-implementation-in-comanche-67|I've explained elsewhere]] why Luminary GSOP section 5 revision 4 corresponds to Luminary 1A.) Thus the coding changes needed for Colossus can be determined by comparing Luminary 99 code to Luminary 69 code. The Luminary GSOP also mentions that additional material related to PCR-707.2 was added in section 5 revision 7 (Luminary 1C). We do have the Luminary 1C GSOP, so it may be possible in principle to find out what that "additional" material is.

But returning to PCR-707.1 proper:

* [[https://www.ibiblio.org/apollo/Documents/HSI-208454.pdf#page=12|Colossus 3 GSOP section 5]] tells us that PCR-707.1 was first incorporated in Colossus 2A (Comanche 55)
* [[https://www.ibiblio.org/apollo/Documents/HSI-208454.pdf#page=13|Colossus 3 GSOP section 5]] also tells us that PCR-707.1 was "reincorporated" in Colossus 2C (Comanche 67)
* //And// that additional material pertaining to PCR-707.1 was added to the GSOP in Colossus 2D
* MIT/IL's presentation for the Apollo 12 Flight Software Readiness Review (FSRR) //does not// include PCR-707.1 among the PCRs/PCNs newly incorporated into Colossus 2C.

This kind of constellation of facts has usually indicated that in Colossus 2C PCR-707.1 is a GSOP-only change, with coding changes having occurred instead in earlier software revisions. However, there have been exceptions in which both the earlier software revision (Colossus 2A in this case) and the later one (Colossus 2C) have required coding changes, so we need to check carefully.

The "Ephemeris Data" presumably corresponds to the constants appearing at the end of the PLANETARY INERTIAL ORIENTATION log section of Colossus or the CONTROLLED CONSTANTS log section of Luminary. As mentioned above, we expect the changes associated with this, in Colossus, to correspond to changes between Luminary 69 and Luminary 99. Or perhaps even more directly, for any given mission we expect the Colossus ephemeris to match the Luminary ephemeris, so there's not even really any revision-to-revision comparison needed. At this point, though, we run into difficulties: The program comments in Luminary 99's CONTROLLED CONSTANTS purport to provide the "CONSTANTS FOR 1969 - 1970", but so do the program comments in Luminary 131 (and in our reconstructed source code for Luminary 116) ... but the constants in Luminary 99 //differ// from those for Luminary 131 (and Luminary 116). So it's not possible that both Luminary 99 and Luminary 116/131 have the 1969-1970 ephemeris, whatever the program comments may say.

Now let's digress and consider PCR-773.1, "Fix Constants for Planetary Inertial Orientation Subroutine". According to the GSOPs, PCR-773.1 was incorporated into Comanche 2C and PCR-773.2 was incorporated into Luminary 1B. As usual, we have no full copy of either PCR. Nevertheless, from the title alone it seems clear that PCR-773.1/2 is dealing with the same subject matter as PCR-707.1/2, not merely in //changing// the ephemeris data to the 1969-1970 epoch but rather in //fixing// it. Thus the reason for the discrepancy in the Luminary 1A ephemeris vs Luminary 1B/1C would seem to be, bluntly, that PCR-707.1/2 were used to change the ephemeris constants in Apollo 11, but the change was made//inaccurately//. It was thus necessary to come back later with PCR-773.1/2 to fix the changes.

The conclusion from that is that there is a true code change in Colossus 2C, and what it needs to be is to pull the ephemeris constants from Luminary 116/131's CONTROLLED CONSTANTS into Comanche 67's PLANETARY INERTIAL ORIENTATION.

In examining the existing code for the Comanche 67 reconstruction, PLANETARY_INERTIAL_ORIENTATION.gpp, I find that the this change has already been made, using the preprocessor constant "Reconstruction773" for conditional assembly. (The analysis I gave above was done independently, without consulting the prior analysis.) Moreover, the program comments added for this reconstruction step point out additionally that [[https://www.ibiblio.org/apollo/Documents/COM-11.pdf|Software Anomaly Report COM-11]], "Errors in fixed constants", provides additional commentary on the issue, a fact which I hadn't noticed in the analysis above. Incidentally, the numerical values quoted in COM-11 don't match the software, but that's because of different physical units (RAD and RAD/SEC vs REVS and REVS/CENTISECOND).

In summary, the PCR-707.1 and PCR-773.1 were incorporated.

