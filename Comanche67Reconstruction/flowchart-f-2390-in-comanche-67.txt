Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4

====== Flowchart FC-2390 in Comanche 67 ======

([[comanche-67-reconstruction|Return to the main Comanche 67 reconstruction page.]])

We have the Colossus 2 and Colossus 2D revisions of flowchart FC-2390, with no indications of the intervening changes. The first step would seem to be to compare the flowcharts side-by-side, and then only compare to reconstructed source code when inter-flowchart differences are encountered.

T5PHASE2, KALUPDT, NOHIAUTO, KRESUME2: 2/1 vs 2D/2: In NOHIAUTO the 2D flowchart appears to be working with bits 1-6 of Channel 31 exclusive-OR'd with the same bits of variable CH31TEMP, whereas the Colossus 2 flowchart appears to be dealing only with Channel 31 by itself. (Assuming the undefined symbol∨̶ is an exclusive OR.) This appears to me to be what the reconstructed code already does, and indeed had already done in Colossus 1. (NOHIAUTO code is unchanged from Colossus 237 through Artemis.) I can only assume that this is an editorial correction of an error in the Colossus 2 flowchart rather than an actual change.

NOCHANGE, FREEFUNC, REINIT, SETWBODY: 2/2 vs 2D/3: Match.

Continuation of SETWBODY, NORATE, ZEROER, MERUPDAT, SPNDXCHK: 2/3 vs 2D/4: In two places, the 2D flowchart appears to use MANTABLE -1, INDEX'd by Q, whereas the Colossus 2 flowchart uses MANTABLE, INDEX'd by Q-1. The result is obviously the same, though the code would differ. Comparing to the reconstructed code, we find that it already agrees with the Colossus 2D flowchart. Moreover, the code in Colossus 1 is identical. So once again this inter-flowchart difference appears to be an editorial correction rather than an actual change. The 2D flowchart also includes a handy table of FREETAU (RMANNDX, PMANNDX, MANNDX), alas illegible, whereas the Colossus 2 flowchart does not. It strikes me that the table in the flowchart//might// read 0, +0.16, -0.16, 0 seconds. Comparing to the reconstructed code, we instead find values 0, +480, -480, 0, though nearby comments say 0, +0.10, -0.10, 0 instead. These values and comments are identical in Colossus 1, so it's possible I've misread (illegible) values of 0.10 in the flowchart as 0.16. Artemis has the same values (0, +480, -480, 0), though the comments are no longer present, so my conclusion would be that this is not something affecting code.

AHFNOROT, FREECONT, HOLDFUNC, AUTOCONT, GRABANG, ENDDAMP: 2/4 vs 2D/5: Match.

ATTHOLD: 2/5 vs 2D/6: Match.

JETS, JLOOP, INHOLD: 2/6 vs 2D/7: Match.

J6, J8, J23, NJ22, NJ23, J7, J22, J21: 2/7 vs 2D/8: Match.

(no flowchart): 2/8 vs 2D/9: Match.

JTIME, TAUNORM, DOJET: 2/9 vs 2D/10: Match.

T6PROGM, T6PROG: 2/10 vs 2D/11: Match.

In summary, looks good!

